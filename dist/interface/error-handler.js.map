{"version":3,"sources":["../../src/interface/error-handler.ts"],"sourcesContent":["import type { FastifyInstance } from 'fastify'\nimport { ResponseValidationError } from 'fastify-type-provider-zod'\n\ntype FastifyErrorHandler = FastifyInstance['errorHandler']\n\nexport const errorHandler: FastifyErrorHandler = (error, request, reply) => {\n  request.log.error(request)\n\n  if (error.validation) {\n    return reply.status(422).send(new Error('Validation failed.'))\n  }\n\n  if (error instanceof ResponseValidationError) {\n    return reply\n      .status(400)\n      .send({ message: 'Response validation failed.', details: error.details })\n  }\n\n  if (error instanceof Error) {\n    return reply.status(400).send({ message: error.message })\n  }\n\n  return reply.status(500).send({ message: 'Internal server error!', error })\n}\n"],"names":["errorHandler","error","request","reply","log","validation","status","send","Error","ResponseValidationError","message","details"],"mappings":";;;;+BAKaA;;;eAAAA;;;wCAJ2B;AAIjC,MAAMA,eAAoC,CAACC,OAAOC,SAASC;IAChED,QAAQE,GAAG,CAACH,KAAK,CAACC;IAElB,IAAID,MAAMI,UAAU,EAAE;QACpB,OAAOF,MAAMG,MAAM,CAAC,KAAKC,IAAI,CAAC,IAAIC,MAAM;IAC1C;IAEA,IAAIP,iBAAiBQ,+CAAuB,EAAE;QAC5C,OAAON,MACJG,MAAM,CAAC,KACPC,IAAI,CAAC;YAAEG,SAAS;YAA+BC,SAASV,MAAMU,OAAO;QAAC;IAC3E;IAEA,IAAIV,iBAAiBO,OAAO;QAC1B,OAAOL,MAAMG,MAAM,CAAC,KAAKC,IAAI,CAAC;YAAEG,SAAST,MAAMS,OAAO;QAAC;IACzD;IAEA,OAAOP,MAAMG,MAAM,CAAC,KAAKC,IAAI,CAAC;QAAEG,SAAS;QAA0BT;IAAM;AAC3E"}