{"version":3,"sources":["../../../../../src/interface/http/controllers/trails/fetch.controller.e2e-spec.ts"],"sourcesContent":["import request from 'supertest'\n\nimport { app } from '@/app'\nimport { Trail } from '@/domain/projects/enterprise/entities/trail'\nimport { PrismaTrailsRepository } from '@/infra/database/prisma/repositories/trails-repository'\n\ndescribe('fetch trails controller (e2e)', () => {\n  beforeAll(async () => {\n    await app.ready()\n  })\n\n  afterAll(async () => {\n    await app.close()\n  })\n\n  it('should be able to fetch trails', async () => {\n    const trailRepository = new PrismaTrailsRepository()\n    const trail1 = Trail.create({\n      name: 'Sistemas',\n    })\n\n    const trail2 = Trail.create({\n      name: 'Design',\n    })\n\n    await trailRepository.create(trail1)\n    await trailRepository.create(trail2)\n\n    const response = await request(app.server).get('/trails')\n\n    expect(response.status).toBe(200)\n    expect(response.body).toMatchObject({\n      trails: [\n        { id: trail1.id.toString(), name: trail1.name },\n        { id: trail2.id.toString(), name: trail2.name },\n      ],\n    })\n  })\n})\n"],"names":["describe","beforeAll","app","ready","afterAll","close","it","trailRepository","PrismaTrailsRepository","trail1","Trail","create","name","trail2","response","request","server","get","expect","status","toBe","body","toMatchObject","trails","id","toString"],"mappings":";;;;kEAAoB;qBAEA;uBACE;kCACiB;;;;;;AAEvCA,SAAS,iCAAiC;IACxCC,UAAU;QACR,MAAMC,QAAG,CAACC,KAAK;IACjB;IAEAC,SAAS;QACP,MAAMF,QAAG,CAACG,KAAK;IACjB;IAEAC,GAAG,kCAAkC;QACnC,MAAMC,kBAAkB,IAAIC,wCAAsB;QAClD,MAAMC,SAASC,YAAK,CAACC,MAAM,CAAC;YAC1BC,MAAM;QACR;QAEA,MAAMC,SAASH,YAAK,CAACC,MAAM,CAAC;YAC1BC,MAAM;QACR;QAEA,MAAML,gBAAgBI,MAAM,CAACF;QAC7B,MAAMF,gBAAgBI,MAAM,CAACE;QAE7B,MAAMC,WAAW,MAAMC,IAAAA,kBAAO,EAACb,QAAG,CAACc,MAAM,EAAEC,GAAG,CAAC;QAE/CC,OAAOJ,SAASK,MAAM,EAAEC,IAAI,CAAC;QAC7BF,OAAOJ,SAASO,IAAI,EAAEC,aAAa,CAAC;YAClCC,QAAQ;gBACN;oBAAEC,IAAIf,OAAOe,EAAE,CAACC,QAAQ;oBAAIb,MAAMH,OAAOG,IAAI;gBAAC;gBAC9C;oBAAEY,IAAIX,OAAOW,EAAE,CAACC,QAAQ;oBAAIb,MAAMC,OAAOD,IAAI;gBAAC;aAC/C;QACH;IACF;AACF"}