{"version":3,"sources":["../../../../../src/interface/http/controllers/projects/filter-posts.controller.ts"],"sourcesContent":["import { makeFilterPostsByQueryUseCase } from '@/interface/factories/projects/make-filter-posts-by-query-use-case'\nimport type { FastifyReply, FastifyRequest } from 'fastify'\nimport { PostPresenter } from '../../presenters/post'\nimport type { FilterPostsQuery } from '../../schemas/projects/filter-posts.schemas'\n\nexport async function filterPosts(\n  request: FastifyRequest<{\n    Querystring: FilterPostsQuery\n  }>,\n  reply: FastifyReply,\n) {\n  const { trailsIds, semester, subjectId, publishedYear } = request.query\n\n  const filterPostsByQueryUseCase = makeFilterPostsByQueryUseCase()\n\n  // Handle comma-separated string or single trail ID\n  const trailsArray = trailsIds \n    ? trailsIds.includes(',') \n      ? trailsIds.split(',').map(id => id.trim())\n      : [trailsIds]\n    : undefined\n\n  const result = await filterPostsByQueryUseCase.execute({\n    trailsIds: trailsArray,\n    semester,\n    subjectId,\n    publishedYear,\n  })\n\n  return reply.status(200).send({\n    posts: result.map(PostPresenter.toHTTP),\n  })\n}\n"],"names":["filterPosts","request","reply","trailsIds","semester","subjectId","publishedYear","query","filterPostsByQueryUseCase","makeFilterPostsByQueryUseCase","trailsArray","includes","split","map","id","trim","undefined","result","execute","status","send","posts","PostPresenter","toHTTP"],"mappings":";;;;+BAKsBA;;;eAAAA;;;+CALwB;sBAEhB;AAGvB,eAAeA,YACpBC,OAEE,EACFC,KAAmB;IAEnB,MAAM,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,aAAa,EAAE,GAAGL,QAAQM,KAAK;IAEvE,MAAMC,4BAA4BC,IAAAA,4DAA6B;IAE/D,mDAAmD;IACnD,MAAMC,cAAcP,YAChBA,UAAUQ,QAAQ,CAAC,OACjBR,UAAUS,KAAK,CAAC,KAAKC,GAAG,CAACC,CAAAA,KAAMA,GAAGC,IAAI,MACtC;QAACZ;KAAU,GACba;IAEJ,MAAMC,SAAS,MAAMT,0BAA0BU,OAAO,CAAC;QACrDf,WAAWO;QACXN;QACAC;QACAC;IACF;IAEA,OAAOJ,MAAMiB,MAAM,CAAC,KAAKC,IAAI,CAAC;QAC5BC,OAAOJ,OAAOJ,GAAG,CAACS,mBAAa,CAACC,MAAM;IACxC;AACF"}