{"version":3,"sources":["../../../../../src/interface/http/controllers/projects/delete.controller.e2e-spec.ts"],"sourcesContent":["import request from 'supertest'\n\nimport { app } from '@/app'\nimport { PrismaProfessorsRepository } from '@/infra/database/prisma/repositories/professors-repository'\nimport { PrismaProjectsRepository } from '@/infra/database/prisma/repositories/projects-repository'\nimport { PrismaSubjectsRepository } from '@/infra/database/prisma/repositories/subjects-repository'\nimport { UniqueEntityID } from '@/shared/kernel/unique-entity-id'\nimport { createAndAuthenticateStudent } from 'test/e2e/create-and-authenticate-students'\nimport { makeProfessor } from 'test/factories/make-professor'\nimport { makeProject } from 'test/factories/make-project'\nimport { makeSubject } from 'test/factories/make-subject'\n\ndescribe('delete project (e2e)', () => {\n  beforeAll(async () => {\n    await app.ready()\n  })\n\n  afterAll(async () => {\n    await app.close()\n  })\n\n  it('should be able to delete a project', async () => {\n    const { studentId, token, trail } = await createAndAuthenticateStudent()\n\n    const professorsRepository = new PrismaProfessorsRepository()\n    const subjectsRepository = new PrismaSubjectsRepository()\n    const projectsRepository = new PrismaProjectsRepository()\n\n    const professor = makeProfessor({\n      name: 'Ticianne de Gois Ribeiro Darin',\n    })\n\n    const subject = makeSubject({\n      name: 'Interação Humano-Computador I',\n    })\n\n    const project = makeProject({\n      authorId: new UniqueEntityID(studentId),\n      subjectId: subject.id,\n      trails: new Set([trail.id]),\n    })\n\n    await professorsRepository.create(professor)\n    await subjectsRepository.create(subject)\n    await projectsRepository.create(project)\n\n    const response = await request(app.server)\n      .delete(`/projects/${project.id.toString()}`)\n      .set('Authorization', `Bearer ${token}`)\n\n    expect(response.status).toBe(204)\n  })\n})\n"],"names":["describe","beforeAll","app","ready","afterAll","close","it","studentId","token","trail","createAndAuthenticateStudent","professorsRepository","PrismaProfessorsRepository","subjectsRepository","PrismaSubjectsRepository","projectsRepository","PrismaProjectsRepository","professor","makeProfessor","name","subject","makeSubject","project","makeProject","authorId","UniqueEntityID","subjectId","id","trails","Set","create","response","request","server","delete","toString","set","expect","status","toBe"],"mappings":";;;;kEAAoB;qBAEA;sCACuB;oCACF;oCACA;gCACV;+CACc;+BACf;6BACF;6BACA;;;;;;AAE5BA,SAAS,wBAAwB;IAC/BC,UAAU;QACR,MAAMC,QAAG,CAACC,KAAK;IACjB;IAEAC,SAAS;QACP,MAAMF,QAAG,CAACG,KAAK;IACjB;IAEAC,GAAG,sCAAsC;QACvC,MAAM,EAAEC,SAAS,EAAEC,KAAK,EAAEC,KAAK,EAAE,GAAG,MAAMC,IAAAA,2DAA4B;QAEtE,MAAMC,uBAAuB,IAAIC,gDAA0B;QAC3D,MAAMC,qBAAqB,IAAIC,4CAAwB;QACvD,MAAMC,qBAAqB,IAAIC,4CAAwB;QAEvD,MAAMC,YAAYC,IAAAA,4BAAa,EAAC;YAC9BC,MAAM;QACR;QAEA,MAAMC,UAAUC,IAAAA,wBAAW,EAAC;YAC1BF,MAAM;QACR;QAEA,MAAMG,UAAUC,IAAAA,wBAAW,EAAC;YAC1BC,UAAU,IAAIC,8BAAc,CAAClB;YAC7BmB,WAAWN,QAAQO,EAAE;YACrBC,QAAQ,IAAIC,IAAI;gBAACpB,MAAMkB,EAAE;aAAC;QAC5B;QAEA,MAAMhB,qBAAqBmB,MAAM,CAACb;QAClC,MAAMJ,mBAAmBiB,MAAM,CAACV;QAChC,MAAML,mBAAmBe,MAAM,CAACR;QAEhC,MAAMS,WAAW,MAAMC,IAAAA,kBAAO,EAAC9B,QAAG,CAAC+B,MAAM,EACtCC,MAAM,CAAC,CAAC,UAAU,EAAEZ,QAAQK,EAAE,CAACQ,QAAQ,IAAI,EAC3CC,GAAG,CAAC,iBAAiB,CAAC,OAAO,EAAE5B,OAAO;QAEzC6B,OAAON,SAASO,MAAM,EAAEC,IAAI,CAAC;IAC/B;AACF"}