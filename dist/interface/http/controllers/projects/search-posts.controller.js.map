{"version":3,"sources":["../../../../../src/interface/http/controllers/projects/search-posts.controller.ts"],"sourcesContent":["import type { FastifyReply, FastifyRequest } from 'fastify'\n\nimport { makeSearchPostsByProfessorNameUseCase } from '@/interface/factories/projects/make-search-posts-by-professor-name-use-case'\nimport { makeSearchPostsByTagUseCase } from '@/interface/factories/projects/make-search-posts-by-tag-use-case'\nimport { makeSearchPostsByTitleUseCase } from '@/interface/factories/projects/make-search-posts-by-title-use-case'\nimport { PostPresenter } from '../../presenters/post'\nimport type { SearchPostsQuery } from '../../schemas/projects/search-posts.schemas'\n\nexport async function searchPosts(\n  request: FastifyRequest<{\n    Querystring: SearchPostsQuery\n  }>,\n  reply: FastifyReply,\n) {\n  const { professorName, tag, title } = request.query\n\n  let posts: Post[] = []\n\n  if (professorName) {\n    const searchPostsByProfessorNameUseCase =\n      makeSearchPostsByProfessorNameUseCase()\n\n    posts = await searchPostsByProfessorNameUseCase.execute({\n      name: professorName,\n    })\n  }\n\n  if (tag) {\n    const searchPostsByTagUseCase = makeSearchPostsByTagUseCase()\n\n    posts = await searchPostsByTagUseCase.execute({\n      tag,\n    })\n  }\n\n  if (title) {\n    const searchPostsByTitleUseCase = makeSearchPostsByTitleUseCase()\n\n    posts = await searchPostsByTitleUseCase.execute({\n      title,\n    })\n  }\n\n  return reply.status(200).send({\n    posts: posts.map(PostPresenter.toHTTP),\n  })\n}\n"],"names":["searchPosts","request","reply","professorName","tag","title","query","posts","searchPostsByProfessorNameUseCase","makeSearchPostsByProfessorNameUseCase","execute","name","searchPostsByTagUseCase","makeSearchPostsByTagUseCase","searchPostsByTitleUseCase","makeSearchPostsByTitleUseCase","status","send","map","PostPresenter","toHTTP"],"mappings":";;;;+BAQsBA;;;eAAAA;;;uDANgC;6CACV;+CACE;sBAChB;AAGvB,eAAeA,YACpBC,OAEE,EACFC,KAAmB;IAEnB,MAAM,EAAEC,aAAa,EAAEC,GAAG,EAAEC,KAAK,EAAE,GAAGJ,QAAQK,KAAK;IAEnD,IAAIC,QAAgB,EAAE;IAEtB,IAAIJ,eAAe;QACjB,MAAMK,oCACJC,IAAAA,4EAAqC;QAEvCF,QAAQ,MAAMC,kCAAkCE,OAAO,CAAC;YACtDC,MAAMR;QACR;IACF;IAEA,IAAIC,KAAK;QACP,MAAMQ,0BAA0BC,IAAAA,wDAA2B;QAE3DN,QAAQ,MAAMK,wBAAwBF,OAAO,CAAC;YAC5CN;QACF;IACF;IAEA,IAAIC,OAAO;QACT,MAAMS,4BAA4BC,IAAAA,4DAA6B;QAE/DR,QAAQ,MAAMO,0BAA0BJ,OAAO,CAAC;YAC9CL;QACF;IACF;IAEA,OAAOH,MAAMc,MAAM,CAAC,KAAKC,IAAI,CAAC;QAC5BV,OAAOA,MAAMW,GAAG,CAACC,mBAAa,CAACC,MAAM;IACvC;AACF"}