{"version":3,"sources":["../../../../../src/interface/http/controllers/projects/upload-banner.ts"],"sourcesContent":["import { makeUploadProjectBannerUseCase } from '@/interface/factories/projects/make-upload-project-banner-use-case'\nimport type { FastifyReply, FastifyRequest } from 'fastify'\nimport type { UpdateBannerParams } from '../../schemas/projects/upload-banner.schemas'\n\nexport async function uploadBanner(\n  request: FastifyRequest<{\n    Params: UpdateBannerParams\n  }>,\n  reply: FastifyReply,\n) {\n  const { projectId } = request.params\n  const bannerImage = await request.file()\n\n  if (!bannerImage) {\n    return reply.code(400).send({ error: 'No image provided.' })\n  }\n\n  const uploadProjectBannerUseCase = makeUploadProjectBannerUseCase()\n\n  const { mimetype } = bannerImage\n\n  const image = await bannerImage.toBuffer()\n\n  await uploadProjectBannerUseCase.execute({\n    filename: `${projectId}.${mimetype.split('/')[1]}`,\n    image,\n    projectId,\n  })\n\n  return reply.code(201).send({\n    message: 'Banner uploaded successfully.',\n  })\n}\n"],"names":["uploadBanner","request","reply","projectId","params","bannerImage","file","code","send","error","uploadProjectBannerUseCase","makeUploadProjectBannerUseCase","mimetype","image","toBuffer","execute","filename","split","message"],"mappings":";;;;+BAIsBA;;;eAAAA;;;gDAJyB;AAIxC,eAAeA,aACpBC,OAEE,EACFC,KAAmB;IAEnB,MAAM,EAAEC,SAAS,EAAE,GAAGF,QAAQG,MAAM;IACpC,MAAMC,cAAc,MAAMJ,QAAQK,IAAI;IAEtC,IAAI,CAACD,aAAa;QAChB,OAAOH,MAAMK,IAAI,CAAC,KAAKC,IAAI,CAAC;YAAEC,OAAO;QAAqB;IAC5D;IAEA,MAAMC,6BAA6BC,IAAAA,8DAA8B;IAEjE,MAAM,EAAEC,QAAQ,EAAE,GAAGP;IAErB,MAAMQ,QAAQ,MAAMR,YAAYS,QAAQ;IAExC,MAAMJ,2BAA2BK,OAAO,CAAC;QACvCC,UAAU,GAAGb,UAAU,CAAC,EAAES,SAASK,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE;QAClDJ;QACAV;IACF;IAEA,OAAOD,MAAMK,IAAI,CAAC,KAAKC,IAAI,CAAC;QAC1BU,SAAS;IACX;AACF"}