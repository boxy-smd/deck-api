{"version":3,"sources":["../../../../../src/interface/http/controllers/projects/publish.controller.ts"],"sourcesContent":["import type { FastifyReply, FastifyRequest } from 'fastify'\n\nimport { makePublishProjectUseCase } from '@/interface/factories/projects/make-publish-project-use-case'\nimport type { PublishProjectBody } from '../../schemas/projects/publish.schemas'\n\nexport async function publishProject(\n  request: FastifyRequest<{\n    Body: PublishProjectBody\n  }>,\n  reply: FastifyReply,\n) {\n  const authorId = request.user.sign.sub\n\n  const {\n    title,\n    description,\n    bannerUrl,\n    content,\n    publishedYear,\n    semester,\n    allowComments,\n    subjectId,\n    trailsIds,\n    professorsIds,\n    draftId,\n  } = request.body\n\n  const publishProjectUseCase = makePublishProjectUseCase()\n\n  const result = await publishProjectUseCase.execute({\n    title,\n    description,\n    bannerUrl,\n    content,\n    publishedYear,\n    semester,\n    allowComments,\n    authorId,\n    subjectId,\n    trailsIds,\n    professorsIds,\n    draftId,\n  })\n\n  if (result.isLeft()) {\n    const error = result.value\n    return reply.status(error.statusCode).send({ message: error.message })\n  }\n\n  return reply.status(201).send({\n    project_id: result.value.projectId,\n  })\n}\n"],"names":["publishProject","request","reply","authorId","user","sign","sub","title","description","bannerUrl","content","publishedYear","semester","allowComments","subjectId","trailsIds","professorsIds","draftId","body","publishProjectUseCase","makePublishProjectUseCase","result","execute","isLeft","error","value","status","statusCode","send","message","project_id","projectId"],"mappings":";;;;+BAKsBA;;;eAAAA;;;2CAHoB;AAGnC,eAAeA,eACpBC,OAEE,EACFC,KAAmB;IAEnB,MAAMC,WAAWF,QAAQG,IAAI,CAACC,IAAI,CAACC,GAAG;IAEtC,MAAM,EACJC,KAAK,EACLC,WAAW,EACXC,SAAS,EACTC,OAAO,EACPC,aAAa,EACbC,QAAQ,EACRC,aAAa,EACbC,SAAS,EACTC,SAAS,EACTC,aAAa,EACbC,OAAO,EACR,GAAGhB,QAAQiB,IAAI;IAEhB,MAAMC,wBAAwBC,IAAAA,oDAAyB;IAEvD,MAAMC,SAAS,MAAMF,sBAAsBG,OAAO,CAAC;QACjDf;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAV;QACAW;QACAC;QACAC;QACAC;IACF;IAEA,IAAII,OAAOE,MAAM,IAAI;QACnB,MAAMC,QAAQH,OAAOI,KAAK;QAC1B,OAAOvB,MAAMwB,MAAM,CAACF,MAAMG,UAAU,EAAEC,IAAI,CAAC;YAAEC,SAASL,MAAMK,OAAO;QAAC;IACtE;IAEA,OAAO3B,MAAMwB,MAAM,CAAC,KAAKE,IAAI,CAAC;QAC5BE,YAAYT,OAAOI,KAAK,CAACM,SAAS;IACpC;AACF"}