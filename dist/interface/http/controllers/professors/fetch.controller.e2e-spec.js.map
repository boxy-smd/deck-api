{"version":3,"sources":["../../../../../src/interface/http/controllers/professors/fetch.controller.e2e-spec.ts"],"sourcesContent":["import request from 'supertest'\n\nimport { app } from '@/app'\nimport { PrismaProfessorsRepository } from '@/infra/database/prisma/repositories/professors-repository'\nimport { makeProfessor } from 'test/factories/make-professor'\n\ndescribe('fetch professors controller (e2e)', () => {\n  beforeAll(async () => {\n    await app.ready()\n  })\n\n  afterAll(async () => {\n    await app.close()\n  })\n\n  it('should be able to fetch professors', async () => {\n    const professorRepository = new PrismaProfessorsRepository()\n\n    const tici = makeProfessor({\n      name: 'Ticianne Darin',\n    })\n\n    const inga = makeProfessor({\n      name: 'Inga Saboia',\n    })\n\n    await professorRepository.create(tici)\n    await professorRepository.create(inga)\n\n    const response = await request(app.server).get('/professors')\n\n    expect(response.status).toBe(200)\n    expect(response.body).toMatchObject({\n      professors: [\n        { id: inga.id.toString(), name: inga.name },\n        { id: tici.id.toString(), name: tici.name },\n      ],\n    })\n  })\n\n  it('should be able to fetch professors by name', async () => {\n    const professorRepository = new PrismaProfessorsRepository()\n\n    const pequeno = makeProfessor({\n      name: 'Henrique Pequeno',\n    })\n\n    const mara = makeProfessor({\n      name: 'Mara Bonates',\n    })\n\n    await professorRepository.create(pequeno)\n    await professorRepository.create(mara)\n\n    const response = await request(app.server).get('/professors').query({\n      name: 'Pequeno',\n    })\n\n    expect(response.status).toBe(200)\n    expect(response.body).toMatchObject({\n      professors: [{ id: pequeno.id.toString(), name: pequeno.name }],\n    })\n  })\n})\n"],"names":["describe","beforeAll","app","ready","afterAll","close","it","professorRepository","PrismaProfessorsRepository","tici","makeProfessor","name","inga","create","response","request","server","get","expect","status","toBe","body","toMatchObject","professors","id","toString","pequeno","mara","query"],"mappings":";;;;kEAAoB;qBAEA;sCACuB;+BACb;;;;;;AAE9BA,SAAS,qCAAqC;IAC5CC,UAAU;QACR,MAAMC,QAAG,CAACC,KAAK;IACjB;IAEAC,SAAS;QACP,MAAMF,QAAG,CAACG,KAAK;IACjB;IAEAC,GAAG,sCAAsC;QACvC,MAAMC,sBAAsB,IAAIC,gDAA0B;QAE1D,MAAMC,OAAOC,IAAAA,4BAAa,EAAC;YACzBC,MAAM;QACR;QAEA,MAAMC,OAAOF,IAAAA,4BAAa,EAAC;YACzBC,MAAM;QACR;QAEA,MAAMJ,oBAAoBM,MAAM,CAACJ;QACjC,MAAMF,oBAAoBM,MAAM,CAACD;QAEjC,MAAME,WAAW,MAAMC,IAAAA,kBAAO,EAACb,QAAG,CAACc,MAAM,EAAEC,GAAG,CAAC;QAE/CC,OAAOJ,SAASK,MAAM,EAAEC,IAAI,CAAC;QAC7BF,OAAOJ,SAASO,IAAI,EAAEC,aAAa,CAAC;YAClCC,YAAY;gBACV;oBAAEC,IAAIZ,KAAKY,EAAE,CAACC,QAAQ;oBAAId,MAAMC,KAAKD,IAAI;gBAAC;gBAC1C;oBAAEa,IAAIf,KAAKe,EAAE,CAACC,QAAQ;oBAAId,MAAMF,KAAKE,IAAI;gBAAC;aAC3C;QACH;IACF;IAEAL,GAAG,8CAA8C;QAC/C,MAAMC,sBAAsB,IAAIC,gDAA0B;QAE1D,MAAMkB,UAAUhB,IAAAA,4BAAa,EAAC;YAC5BC,MAAM;QACR;QAEA,MAAMgB,OAAOjB,IAAAA,4BAAa,EAAC;YACzBC,MAAM;QACR;QAEA,MAAMJ,oBAAoBM,MAAM,CAACa;QACjC,MAAMnB,oBAAoBM,MAAM,CAACc;QAEjC,MAAMb,WAAW,MAAMC,IAAAA,kBAAO,EAACb,QAAG,CAACc,MAAM,EAAEC,GAAG,CAAC,eAAeW,KAAK,CAAC;YAClEjB,MAAM;QACR;QAEAO,OAAOJ,SAASK,MAAM,EAAEC,IAAI,CAAC;QAC7BF,OAAOJ,SAASO,IAAI,EAAEC,aAAa,CAAC;YAClCC,YAAY;gBAAC;oBAAEC,IAAIE,QAAQF,EAAE,CAACC,QAAQ;oBAAId,MAAMe,QAAQf,IAAI;gBAAC;aAAE;QACjE;IACF;AACF"}