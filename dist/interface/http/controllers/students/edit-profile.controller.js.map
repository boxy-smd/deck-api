{"version":3,"sources":["../../../../../src/interface/http/controllers/students/edit-profile.controller.ts"],"sourcesContent":["import type { FastifyReply, FastifyRequest } from 'fastify'\n\nimport { makeEditProfileUseCase } from '@/interface/factories/students/make-edit-profile-use-case'\nimport { StudentProfilePresenter } from '../../presenters/student-profile'\nimport type {\n  EditProfileBody,\n  EditProfileParams,\n} from '../../schemas/students/edit-profile.schemas'\n\nexport async function editProfile(\n  request: FastifyRequest<{\n    Params: EditProfileParams\n    Body: EditProfileBody\n  }>,\n  reply: FastifyReply,\n) {\n  const { studentId } = request.params\n\n  if (studentId !== request.user.sign.sub) {\n    return reply.status(403).send({ message: 'Forbidden.' })\n  }\n\n  const { about, profileUrl, semester, trailsIds } = request.body\n\n  const editProfileUseCase = makeEditProfileUseCase()\n\n  const result = await editProfileUseCase.execute({\n    studentId,\n    profileUrl,\n    semester,\n    trailsIds,\n    about,\n  })\n\n  if (result.isLeft()) {\n    const error = result.value\n    return reply.status(error.statusCode).send({ message: error.message })\n  }\n\n  return reply.status(200).send({\n    profile: StudentProfilePresenter.toHTTP(result.value),\n  })\n}\n"],"names":["editProfile","request","reply","studentId","params","user","sign","sub","status","send","message","about","profileUrl","semester","trailsIds","body","editProfileUseCase","makeEditProfileUseCase","result","execute","isLeft","error","value","statusCode","profile","StudentProfilePresenter","toHTTP"],"mappings":";;;;+BASsBA;;;eAAAA;;;wCAPiB;gCACC;AAMjC,eAAeA,YACpBC,OAGE,EACFC,KAAmB;IAEnB,MAAM,EAAEC,SAAS,EAAE,GAAGF,QAAQG,MAAM;IAEpC,IAAID,cAAcF,QAAQI,IAAI,CAACC,IAAI,CAACC,GAAG,EAAE;QACvC,OAAOL,MAAMM,MAAM,CAAC,KAAKC,IAAI,CAAC;YAAEC,SAAS;QAAa;IACxD;IAEA,MAAM,EAAEC,KAAK,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,SAAS,EAAE,GAAGb,QAAQc,IAAI;IAE/D,MAAMC,qBAAqBC,IAAAA,8CAAsB;IAEjD,MAAMC,SAAS,MAAMF,mBAAmBG,OAAO,CAAC;QAC9ChB;QACAS;QACAC;QACAC;QACAH;IACF;IAEA,IAAIO,OAAOE,MAAM,IAAI;QACnB,MAAMC,QAAQH,OAAOI,KAAK;QAC1B,OAAOpB,MAAMM,MAAM,CAACa,MAAME,UAAU,EAAEd,IAAI,CAAC;YAAEC,SAASW,MAAMX,OAAO;QAAC;IACtE;IAEA,OAAOR,MAAMM,MAAM,CAAC,KAAKC,IAAI,CAAC;QAC5Be,SAASC,uCAAuB,CAACC,MAAM,CAACR,OAAOI,KAAK;IACtD;AACF"}