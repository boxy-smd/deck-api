{"version":3,"sources":["../../../../../src/interface/http/controllers/students/refresh.controller.e2e-spec.ts"],"sourcesContent":["import request from 'supertest'\n\nimport { app } from '@/app'\nimport { createAndAuthenticateStudent } from 'test/e2e/create-and-authenticate-students'\n\ndescribe('refresh controller (e2e)', () => {\n  beforeAll(async () => {\n    await app.ready()\n  })\n\n  afterAll(async () => {\n    await app.close()\n  })\n\n  it('should be able to refresh a token', async () => {\n    const { cookies } = await createAndAuthenticateStudent()\n\n    if (!cookies) {\n      throw new Error('No cookies found')\n    }\n\n    const response = await request(app.server)\n      .patch('/token/refresh')\n      .set('Cookie', cookies)\n      .send()\n\n    expect(response.status).toBe(200)\n    expect(response.body).toMatchObject({\n      token: expect.any(String),\n    })\n    expect(response.get('Set-Cookie')).toEqual([\n      expect.stringContaining('refreshToken='),\n    ])\n  })\n})\n"],"names":["describe","beforeAll","app","ready","afterAll","close","it","cookies","createAndAuthenticateStudent","Error","response","request","server","patch","set","send","expect","status","toBe","body","toMatchObject","token","any","String","get","toEqual","stringContaining"],"mappings":";;;;kEAAoB;qBAEA;+CACyB;;;;;;AAE7CA,SAAS,4BAA4B;IACnCC,UAAU;QACR,MAAMC,QAAG,CAACC,KAAK;IACjB;IAEAC,SAAS;QACP,MAAMF,QAAG,CAACG,KAAK;IACjB;IAEAC,GAAG,qCAAqC;QACtC,MAAM,EAAEC,OAAO,EAAE,GAAG,MAAMC,IAAAA,2DAA4B;QAEtD,IAAI,CAACD,SAAS;YACZ,MAAM,IAAIE,MAAM;QAClB;QAEA,MAAMC,WAAW,MAAMC,IAAAA,kBAAO,EAACT,QAAG,CAACU,MAAM,EACtCC,KAAK,CAAC,kBACNC,GAAG,CAAC,UAAUP,SACdQ,IAAI;QAEPC,OAAON,SAASO,MAAM,EAAEC,IAAI,CAAC;QAC7BF,OAAON,SAASS,IAAI,EAAEC,aAAa,CAAC;YAClCC,OAAOL,OAAOM,GAAG,CAACC;QACpB;QACAP,OAAON,SAASc,GAAG,CAAC,eAAeC,OAAO,CAAC;YACzCT,OAAOU,gBAAgB,CAAC;SACzB;IACH;AACF"}