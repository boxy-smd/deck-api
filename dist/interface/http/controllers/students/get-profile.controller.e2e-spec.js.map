{"version":3,"sources":["../../../../../src/interface/http/controllers/students/get-profile.controller.e2e-spec.ts"],"sourcesContent":["import request from 'supertest'\n\nimport { app } from '@/app'\nimport { PrismaStudentsRepository } from '@/infra/database/prisma/repositories/students-repository'\nimport { makeUser } from 'test/factories/make-user'\n\ndescribe('get profile controller (e2e)', () => {\n  beforeAll(async () => {\n    await app.ready()\n  })\n\n  afterAll(async () => {\n    await app.close()\n  })\n\n  it('should be able to get profile', async () => {\n    const studentsRepository = new PrismaStudentsRepository()\n\n    const student = await makeUser()\n\n    await studentsRepository.create(student)\n\n    const response = await request(app.server).get(\n      `/profiles/${student.username.value}`,\n    )\n\n    expect(response.status).toBe(200)\n    expect(response.body).toMatchObject({\n      profile: {\n        id: student.id.toString(),\n        name: student.name,\n        username: student.username.value,\n        about: student.about,\n        semester: student.profile?.semester.value,\n        profileUrl: student.profileUrl,\n        trails: [],\n        posts: [],\n      },\n    })\n  })\n})\n"],"names":["describe","beforeAll","app","ready","afterAll","close","it","studentsRepository","PrismaStudentsRepository","student","makeUser","create","response","request","server","get","username","value","expect","status","toBe","body","toMatchObject","profile","id","toString","name","about","semester","profileUrl","trails","posts"],"mappings":";;;;kEAAoB;qBAEA;oCACqB;0BAChB;;;;;;AAEzBA,SAAS,gCAAgC;IACvCC,UAAU;QACR,MAAMC,QAAG,CAACC,KAAK;IACjB;IAEAC,SAAS;QACP,MAAMF,QAAG,CAACG,KAAK;IACjB;IAEAC,GAAG,iCAAiC;QAClC,MAAMC,qBAAqB,IAAIC,4CAAwB;QAEvD,MAAMC,UAAU,MAAMC,IAAAA,kBAAQ;QAE9B,MAAMH,mBAAmBI,MAAM,CAACF;QAEhC,MAAMG,WAAW,MAAMC,IAAAA,kBAAO,EAACX,QAAG,CAACY,MAAM,EAAEC,GAAG,CAC5C,CAAC,UAAU,EAAEN,QAAQO,QAAQ,CAACC,KAAK,EAAE;QAGvCC,OAAON,SAASO,MAAM,EAAEC,IAAI,CAAC;QAC7BF,OAAON,SAASS,IAAI,EAAEC,aAAa,CAAC;YAClCC,SAAS;gBACPC,IAAIf,QAAQe,EAAE,CAACC,QAAQ;gBACvBC,MAAMjB,QAAQiB,IAAI;gBAClBV,UAAUP,QAAQO,QAAQ,CAACC,KAAK;gBAChCU,OAAOlB,QAAQkB,KAAK;gBACpBC,UAAUnB,QAAQc,OAAO,EAAEK,SAASX;gBACpCY,YAAYpB,QAAQoB,UAAU;gBAC9BC,QAAQ,EAAE;gBACVC,OAAO,EAAE;YACX;QACF;IACF;AACF"}