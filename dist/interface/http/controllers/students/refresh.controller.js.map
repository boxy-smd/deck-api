{"version":3,"sources":["../../../../../src/interface/http/controllers/students/refresh.controller.ts"],"sourcesContent":["import type { FastifyReply, FastifyRequest } from 'fastify'\n\nexport async function refresh(request: FastifyRequest, reply: FastifyReply) {\n  await request.jwtVerify({ onlyCookie: true })\n\n  const token = await reply.jwtSign({\n    sign: {\n      sub: request.user.sign.sub,\n    },\n  })\n\n  const refreshToken = await reply.jwtSign({\n    sign: {\n      sub: request.user.sign.sub,\n    },\n  })\n\n  return reply\n    .setCookie('refreshToken', refreshToken, {\n      path: '/',\n      secure: true,\n      sameSite: true,\n      httpOnly: true,\n    })\n    .status(200)\n    .send({\n      token,\n    })\n}\n"],"names":["refresh","request","reply","jwtVerify","onlyCookie","token","jwtSign","sign","sub","user","refreshToken","setCookie","path","secure","sameSite","httpOnly","status","send"],"mappings":";;;;+BAEsBA;;;eAAAA;;;AAAf,eAAeA,QAAQC,OAAuB,EAAEC,KAAmB;IACxE,MAAMD,QAAQE,SAAS,CAAC;QAAEC,YAAY;IAAK;IAE3C,MAAMC,QAAQ,MAAMH,MAAMI,OAAO,CAAC;QAChCC,MAAM;YACJC,KAAKP,QAAQQ,IAAI,CAACF,IAAI,CAACC,GAAG;QAC5B;IACF;IAEA,MAAME,eAAe,MAAMR,MAAMI,OAAO,CAAC;QACvCC,MAAM;YACJC,KAAKP,QAAQQ,IAAI,CAACF,IAAI,CAACC,GAAG;QAC5B;IACF;IAEA,OAAON,MACJS,SAAS,CAAC,gBAAgBD,cAAc;QACvCE,MAAM;QACNC,QAAQ;QACRC,UAAU;QACVC,UAAU;IACZ,GACCC,MAAM,CAAC,KACPC,IAAI,CAAC;QACJZ;IACF;AACJ"}