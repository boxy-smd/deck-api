{"version":3,"sources":["../../../../../src/interface/http/controllers/students/register.controller.e2e-spec.ts"],"sourcesContent":["import request from 'supertest'\n\nimport { app } from '@/app'\nimport { PrismaTrailsRepository } from '@/infra/database/prisma/repositories/trails-repository'\nimport { makeTrail } from 'test/factories/make-trail'\n\ndescribe('register controller (e2e)', () => {\n  beforeAll(async () => {\n    await app.ready()\n  })\n\n  afterAll(async () => {\n    await app.close()\n  })\n\n  it('should be able to register a user', async () => {\n    const trail = makeTrail()\n    const trailsRepository = new PrismaTrailsRepository()\n\n    await trailsRepository.create(trail)\n\n    const response = await request(app.server)\n      .post('/students')\n      .send({\n        name: 'John Doe',\n        username: 'johndoe',\n        email: 'johndoe@alu.ufc.br',\n        password: '123456',\n        semester: 1,\n        trailsIds: [trail.id.toString()],\n      })\n\n    expect(response.status).toBe(201)\n    expect(response.body).toMatchObject({\n      user_id: expect.any(String),\n    })\n  })\n})\n"],"names":["describe","beforeAll","app","ready","afterAll","close","it","trail","makeTrail","trailsRepository","PrismaTrailsRepository","create","response","request","server","post","send","name","username","email","password","semester","trailsIds","id","toString","expect","status","toBe","body","toMatchObject","user_id","any","String"],"mappings":";;;;kEAAoB;qBAEA;kCACmB;2BACb;;;;;;AAE1BA,SAAS,6BAA6B;IACpCC,UAAU;QACR,MAAMC,QAAG,CAACC,KAAK;IACjB;IAEAC,SAAS;QACP,MAAMF,QAAG,CAACG,KAAK;IACjB;IAEAC,GAAG,qCAAqC;QACtC,MAAMC,QAAQC,IAAAA,oBAAS;QACvB,MAAMC,mBAAmB,IAAIC,wCAAsB;QAEnD,MAAMD,iBAAiBE,MAAM,CAACJ;QAE9B,MAAMK,WAAW,MAAMC,IAAAA,kBAAO,EAACX,QAAG,CAACY,MAAM,EACtCC,IAAI,CAAC,aACLC,IAAI,CAAC;YACJC,MAAM;YACNC,UAAU;YACVC,OAAO;YACPC,UAAU;YACVC,UAAU;YACVC,WAAW;gBAACf,MAAMgB,EAAE,CAACC,QAAQ;aAAG;QAClC;QAEFC,OAAOb,SAASc,MAAM,EAAEC,IAAI,CAAC;QAC7BF,OAAOb,SAASgB,IAAI,EAAEC,aAAa,CAAC;YAClCC,SAASL,OAAOM,GAAG,CAACC;QACtB;IACF;AACF"}