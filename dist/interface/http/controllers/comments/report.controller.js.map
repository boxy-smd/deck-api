{"version":3,"sources":["../../../../../src/interface/http/controllers/comments/report.controller.ts"],"sourcesContent":["import { makeReportCommentUseCase } from '@/interface/factories/comments/make-report-comment-use-case'\nimport type { FastifyReply, FastifyRequest } from 'fastify'\nimport type {\n  ReporCommentBody,\n  ReporCommentParams,\n} from '../../schemas/comments/report.schemas'\n\nexport async function reportComment(\n  request: FastifyRequest<{\n    Params: ReporCommentParams\n    Body: ReporCommentBody\n  }>,\n  reply: FastifyReply,\n): Promise<void> {\n  const { commentId } = request.params\n  const { content, projectId } = request.body\n\n  const authorId = request.user.sign.sub\n\n  const reportCommentUseCase = makeReportCommentUseCase()\n\n  const result = await reportCommentUseCase.execute({\n    authorId,\n    commentId,\n    projectId,\n    content,\n  })\n\n  if (result.isLeft()) {\n    const error = result.value\n    return reply.status(error.statusCode).send(error.message)\n  }\n\n  return reply.status(201).send({\n    message: 'Comment reported successfully.',\n  })\n}\n"],"names":["reportComment","request","reply","commentId","params","content","projectId","body","authorId","user","sign","sub","reportCommentUseCase","makeReportCommentUseCase","result","execute","isLeft","error","value","status","statusCode","send","message"],"mappings":";;;;+BAOsBA;;;eAAAA;;;0CAPmB;AAOlC,eAAeA,cACpBC,OAGE,EACFC,KAAmB;IAEnB,MAAM,EAAEC,SAAS,EAAE,GAAGF,QAAQG,MAAM;IACpC,MAAM,EAAEC,OAAO,EAAEC,SAAS,EAAE,GAAGL,QAAQM,IAAI;IAE3C,MAAMC,WAAWP,QAAQQ,IAAI,CAACC,IAAI,CAACC,GAAG;IAEtC,MAAMC,uBAAuBC,IAAAA,kDAAwB;IAErD,MAAMC,SAAS,MAAMF,qBAAqBG,OAAO,CAAC;QAChDP;QACAL;QACAG;QACAD;IACF;IAEA,IAAIS,OAAOE,MAAM,IAAI;QACnB,MAAMC,QAAQH,OAAOI,KAAK;QAC1B,OAAOhB,MAAMiB,MAAM,CAACF,MAAMG,UAAU,EAAEC,IAAI,CAACJ,MAAMK,OAAO;IAC1D;IAEA,OAAOpB,MAAMiB,MAAM,CAAC,KAAKE,IAAI,CAAC;QAC5BC,SAAS;IACX;AACF"}