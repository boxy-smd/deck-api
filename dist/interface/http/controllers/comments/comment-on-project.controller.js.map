{"version":3,"sources":["../../../../../src/interface/http/controllers/comments/comment-on-project.controller.ts"],"sourcesContent":["import type { FastifyReply, FastifyRequest } from 'fastify'\n\nimport { makeCommentOnProjectUseCase } from '@/interface/factories/comments/make-comment-on-project-use-case'\nimport type {\n  CommentOnProjectBody,\n  CommentOnProjectParams,\n} from '../../schemas/comments/comment-on-project.schemas'\n\nexport async function commentOnProject(\n  request: FastifyRequest<{\n    Params: CommentOnProjectParams\n    Body: CommentOnProjectBody\n  }>,\n  reply: FastifyReply,\n) {\n  const { projectId } = request.params\n  const { content } = request.body\n\n  const commentOnProjectUseCase = makeCommentOnProjectUseCase()\n\n  const result = await commentOnProjectUseCase.execute({\n    projectId,\n    content,\n    authorId: request.user.sign.sub,\n  })\n\n  if (result.isLeft()) {\n    const error = result.value\n    return reply.code(error.statusCode).send(error)\n  }\n\n  return reply.code(201).send({\n    comment_id: result.value.commentId,\n  })\n}\n"],"names":["commentOnProject","request","reply","projectId","params","content","body","commentOnProjectUseCase","makeCommentOnProjectUseCase","result","execute","authorId","user","sign","sub","isLeft","error","value","code","statusCode","send","comment_id","commentId"],"mappings":";;;;+BAQsBA;;;eAAAA;;;6CANsB;AAMrC,eAAeA,iBACpBC,OAGE,EACFC,KAAmB;IAEnB,MAAM,EAAEC,SAAS,EAAE,GAAGF,QAAQG,MAAM;IACpC,MAAM,EAAEC,OAAO,EAAE,GAAGJ,QAAQK,IAAI;IAEhC,MAAMC,0BAA0BC,IAAAA,wDAA2B;IAE3D,MAAMC,SAAS,MAAMF,wBAAwBG,OAAO,CAAC;QACnDP;QACAE;QACAM,UAAUV,QAAQW,IAAI,CAACC,IAAI,CAACC,GAAG;IACjC;IAEA,IAAIL,OAAOM,MAAM,IAAI;QACnB,MAAMC,QAAQP,OAAOQ,KAAK;QAC1B,OAAOf,MAAMgB,IAAI,CAACF,MAAMG,UAAU,EAAEC,IAAI,CAACJ;IAC3C;IAEA,OAAOd,MAAMgB,IAAI,CAAC,KAAKE,IAAI,CAAC;QAC1BC,YAAYZ,OAAOQ,KAAK,CAACK,SAAS;IACpC;AACF"}