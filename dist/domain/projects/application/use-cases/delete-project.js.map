{"version":3,"sources":["../../../../../src/domain/projects/application/use-cases/delete-project.ts"],"sourcesContent":["import { type Either, left, right } from '@/shared/either'\nimport { ForbiddenError } from '@/shared/errors/forbidden.error'\nimport { ResourceNotFoundError } from '@/shared/errors/resource-not-found.error'\nimport type { ProjectsRepository } from '../repositories/projects-repository'\n\ninterface DeleteProjectUseCaseRequest {\n  studentId: string\n  projectId: string\n}\n\ntype DeleteProjectUseCaseResponse = Either<\n  ForbiddenError | ResourceNotFoundError,\n  void\n>\n\nexport class DeleteProjectUseCase {\n  constructor(private projectRepository: ProjectsRepository) {}\n\n  async execute({\n    studentId,\n    projectId,\n  }: DeleteProjectUseCaseRequest): Promise<DeleteProjectUseCaseResponse> {\n    const project = await this.projectRepository.findById(projectId)\n\n    if (!project) {\n      return left(new ResourceNotFoundError('Projeto não encontrado.'))\n    }\n\n    if (project.authorId.toString() !== studentId) {\n      return left(\n        new ForbiddenError('Você não tem permissão para deletar este projeto.'),\n      )\n    }\n\n    await this.projectRepository.delete(project)\n\n    return right(undefined)\n  }\n}\n"],"names":["DeleteProjectUseCase","execute","studentId","projectId","project","projectRepository","findById","left","ResourceNotFoundError","authorId","toString","ForbiddenError","delete","right","undefined"],"mappings":";;;;+BAeaA;;;eAAAA;;;wBAf4B;gCACV;uCACO;AAa/B,IAAA,AAAMA,uBAAN,MAAMA;IAGX,MAAMC,QAAQ,EACZC,SAAS,EACTC,SAAS,EACmB,EAAyC;QACrE,MAAMC,UAAU,MAAM,IAAI,CAACC,iBAAiB,CAACC,QAAQ,CAACH;QAEtD,IAAI,CAACC,SAAS;YACZ,OAAOG,IAAAA,YAAI,EAAC,IAAIC,4CAAqB,CAAC;QACxC;QAEA,IAAIJ,QAAQK,QAAQ,CAACC,QAAQ,OAAOR,WAAW;YAC7C,OAAOK,IAAAA,YAAI,EACT,IAAII,8BAAc,CAAC;QAEvB;QAEA,MAAM,IAAI,CAACN,iBAAiB,CAACO,MAAM,CAACR;QAEpC,OAAOS,IAAAA,aAAK,EAACC;IACf;IArBA,YAAY,AAAQT,iBAAqC,CAAE;aAAvCA,oBAAAA;IAAwC;AAsB9D"}