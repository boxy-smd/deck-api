{"version":3,"sources":["../../../../../src/domain/projects/application/use-cases/search-posts-by-professor-name.spec.ts"],"sourcesContent":["import type { UsersRepository } from '@/domain/authentication/application/repositories/users-repository'\nimport { StudentProfile } from '@/domain/authentication/enterprise/entities/student-profile'\nimport type { User } from '@/domain/authentication/enterprise/entities/user'\nimport { Semester } from '@/domain/authentication/enterprise/value-objects/semester'\nimport { UniqueEntityID } from '@/shared/kernel/unique-entity-id'\nimport { makeProfessor } from 'test/factories/make-professor'\nimport { makeProject } from 'test/factories/make-project'\nimport { makeTrail } from 'test/factories/make-trail'\nimport { makeUser } from 'test/factories/make-user'\nimport { InMemoryProfessorsRepository } from 'test/repositories/professors-repository'\nimport { InMemoryProjectsRepository } from 'test/repositories/projects-repository'\nimport { InMemoryTrailsRepository } from 'test/repositories/trails-repository'\nimport { InMemoryUsersRepository } from 'test/repositories/users-repository'\nimport type { Project } from '../../../projects/enterprise/entities/project'\nimport type { Professor } from '../../enterprise/entities/professor'\nimport type { Trail } from '../../enterprise/entities/trail'\nimport type { ProfessorsRepository } from '../repositories/professors-repository'\nimport type { ProjectsRepository } from '../repositories/projects-repository'\nimport type { TrailsRepository } from '../repositories/trails-repository'\nimport { SearchPostsByProfessorUseCase } from './search-posts-by-professor-name'\n\nlet projectsRepository: ProjectsRepository\nlet studentsRepository: UsersRepository\nlet trailsRepository: TrailsRepository\nlet professorsRepository: ProfessorsRepository\n\nlet author: User\nlet trail: Trail\nlet professor: Professor\nlet project: Project\n\nlet sut: SearchPostsByProfessorUseCase\n\ndescribe('search posts by professor name use case', () => {\n  beforeEach(async () => {\n    studentsRepository = new InMemoryUsersRepository()\n    trailsRepository = new InMemoryTrailsRepository()\n    professorsRepository = new InMemoryProfessorsRepository()\n\n    projectsRepository = new InMemoryProjectsRepository(\n      studentsRepository,\n      undefined,\n      trailsRepository,\n      professorsRepository,\n    )\n\n    const id = UniqueEntityID.create()\n\n    author = await makeUser(\n      {\n        profile: StudentProfile.create(\n          { semester: Semester.create(1).value as Semester },\n          id,\n        ),\n      },\n      id,\n    )\n\n    trail = makeTrail()\n\n    professor = makeProfessor({\n      name: 'Dio Brando',\n    })\n\n    project = makeProject({\n      title: 'Awesome project',\n      authorId: author.id,\n      trails: new Set([trail.id]),\n      professors: new Set([professor.id]),\n    })\n\n    await studentsRepository.create(author)\n    await trailsRepository.create(trail)\n    await professorsRepository.create(professor)\n    await projectsRepository.create(project)\n\n    sut = new SearchPostsByProfessorUseCase(projectsRepository)\n  })\n\n  it('should be able to search posts by professor name', async () => {\n    const result = await sut.execute({\n      name: 'Dio',\n    })\n\n    expect(result).length(1)\n    expect(result[0].title).toBe(project.title)\n  })\n\n  it('should be able to search posts by professor name case insensitive', async () => {\n    const result = await sut.execute({\n      name: 'dio',\n    })\n\n    expect(result).length(1)\n    expect(result[0].title).toBe(project.title)\n  })\n\n  it('should be able to search posts by professor name with partial match', async () => {\n    const result = await sut.execute({\n      name: 'Di',\n    })\n\n    expect(result).length(1)\n    expect(result[0].title).toBe(project.title)\n  })\n\n  it('should not return any post when professor name does not match', async () => {\n    const result = await sut.execute({\n      name: 'Not found',\n    })\n\n    expect(result).length(0)\n  })\n})\n"],"names":["projectsRepository","studentsRepository","trailsRepository","professorsRepository","author","trail","professor","project","sut","describe","beforeEach","InMemoryUsersRepository","InMemoryTrailsRepository","InMemoryProfessorsRepository","InMemoryProjectsRepository","undefined","id","UniqueEntityID","create","makeUser","profile","StudentProfile","semester","Semester","value","makeTrail","makeProfessor","name","makeProject","title","authorId","trails","Set","professors","SearchPostsByProfessorUseCase","it","result","execute","expect","length","toBe"],"mappings":";;;;gCAC+B;0BAEN;gCACM;+BACD;6BACF;2BACF;0BACD;sCACoB;oCACF;kCACF;iCACD;4CAOM;AAE9C,IAAIA;AACJ,IAAIC;AACJ,IAAIC;AACJ,IAAIC;AAEJ,IAAIC;AACJ,IAAIC;AACJ,IAAIC;AACJ,IAAIC;AAEJ,IAAIC;AAEJC,SAAS,2CAA2C;IAClDC,WAAW;QACTT,qBAAqB,IAAIU,wCAAuB;QAChDT,mBAAmB,IAAIU,0CAAwB;QAC/CT,uBAAuB,IAAIU,kDAA4B;QAEvDb,qBAAqB,IAAIc,8CAA0B,CACjDb,oBACAc,WACAb,kBACAC;QAGF,MAAMa,KAAKC,8BAAc,CAACC,MAAM;QAEhCd,SAAS,MAAMe,IAAAA,kBAAQ,EACrB;YACEC,SAASC,8BAAc,CAACH,MAAM,CAC5B;gBAAEI,UAAUC,kBAAQ,CAACL,MAAM,CAAC,GAAGM,KAAK;YAAa,GACjDR;QAEJ,GACAA;QAGFX,QAAQoB,IAAAA,oBAAS;QAEjBnB,YAAYoB,IAAAA,4BAAa,EAAC;YACxBC,MAAM;QACR;QAEApB,UAAUqB,IAAAA,wBAAW,EAAC;YACpBC,OAAO;YACPC,UAAU1B,OAAOY,EAAE;YACnBe,QAAQ,IAAIC,IAAI;gBAAC3B,MAAMW,EAAE;aAAC;YAC1BiB,YAAY,IAAID,IAAI;gBAAC1B,UAAUU,EAAE;aAAC;QACpC;QAEA,MAAMf,mBAAmBiB,MAAM,CAACd;QAChC,MAAMF,iBAAiBgB,MAAM,CAACb;QAC9B,MAAMF,qBAAqBe,MAAM,CAACZ;QAClC,MAAMN,mBAAmBkB,MAAM,CAACX;QAEhCC,MAAM,IAAI0B,yDAA6B,CAAClC;IAC1C;IAEAmC,GAAG,oDAAoD;QACrD,MAAMC,SAAS,MAAM5B,IAAI6B,OAAO,CAAC;YAC/BV,MAAM;QACR;QAEAW,OAAOF,QAAQG,MAAM,CAAC;QACtBD,OAAOF,MAAM,CAAC,EAAE,CAACP,KAAK,EAAEW,IAAI,CAACjC,QAAQsB,KAAK;IAC5C;IAEAM,GAAG,qEAAqE;QACtE,MAAMC,SAAS,MAAM5B,IAAI6B,OAAO,CAAC;YAC/BV,MAAM;QACR;QAEAW,OAAOF,QAAQG,MAAM,CAAC;QACtBD,OAAOF,MAAM,CAAC,EAAE,CAACP,KAAK,EAAEW,IAAI,CAACjC,QAAQsB,KAAK;IAC5C;IAEAM,GAAG,uEAAuE;QACxE,MAAMC,SAAS,MAAM5B,IAAI6B,OAAO,CAAC;YAC/BV,MAAM;QACR;QAEAW,OAAOF,QAAQG,MAAM,CAAC;QACtBD,OAAOF,MAAM,CAAC,EAAE,CAACP,KAAK,EAAEW,IAAI,CAACjC,QAAQsB,KAAK;IAC5C;IAEAM,GAAG,iEAAiE;QAClE,MAAMC,SAAS,MAAM5B,IAAI6B,OAAO,CAAC;YAC/BV,MAAM;QACR;QAEAW,OAAOF,QAAQG,MAAM,CAAC;IACxB;AACF"}