{"version":3,"sources":["../../../../../src/domain/projects/application/use-cases/search-posts-by-tag.spec.ts"],"sourcesContent":["import type { UsersRepository } from '@/domain/authentication/application/repositories/users-repository'\nimport { StudentProfile } from '@/domain/authentication/enterprise/entities/student-profile'\nimport type { User } from '@/domain/authentication/enterprise/entities/user'\nimport { Semester } from '@/domain/authentication/enterprise/value-objects/semester'\nimport { UniqueEntityID } from '@/shared/kernel/unique-entity-id'\nimport { makeProject } from 'test/factories/make-project'\nimport { makeSubject } from 'test/factories/make-subject'\nimport { makeTrail } from 'test/factories/make-trail'\nimport { makeUser } from 'test/factories/make-user'\nimport { InMemoryProjectsRepository } from 'test/repositories/projects-repository'\nimport { InMemorySubjectsRepository } from 'test/repositories/subjects-repository'\nimport { InMemoryTrailsRepository } from 'test/repositories/trails-repository'\nimport { InMemoryUsersRepository } from 'test/repositories/users-repository'\nimport type { Project } from '../../../projects/enterprise/entities/project'\nimport type { Trail } from '../../enterprise/entities/trail'\nimport type { ProjectsRepository } from '../repositories/projects-repository'\nimport type { SubjectsRepository } from '../repositories/subjects-repository'\nimport type { TrailsRepository } from '../repositories/trails-repository'\nimport { SearchPostsByTagUseCase } from './search-posts-by-tag'\n\nlet projectsRepository: ProjectsRepository\nlet studentsRepository: UsersRepository\nlet trailsRepository: TrailsRepository\nlet subjectsRepository: SubjectsRepository\n\nlet author: User\nlet trail: Trail\nlet project: Project\n\nlet sut: SearchPostsByTagUseCase\n\ndescribe('search posts by tag use case', () => {\n  beforeEach(async () => {\n    studentsRepository = new InMemoryUsersRepository()\n    trailsRepository = new InMemoryTrailsRepository()\n    subjectsRepository = new InMemorySubjectsRepository()\n\n    projectsRepository = new InMemoryProjectsRepository(\n      studentsRepository,\n      subjectsRepository,\n      trailsRepository,\n      undefined,\n    )\n\n    const id = UniqueEntityID.create()\n\n    author = await makeUser(\n      {\n        profile: StudentProfile.create(\n          { semester: Semester.create(1).value as Semester },\n          id,\n        ),\n      },\n      id,\n    )\n\n    trail = makeTrail({\n      name: 'Design',\n    })\n\n    const subject = makeSubject({\n      name: 'Comunicação Visual I',\n    })\n\n    project = makeProject({\n      title: 'Awesome project',\n      authorId: author.id,\n      trails: new Set([trail.id]),\n      subjectId: subject.id,\n      publishedYear: 2024,\n      semester: 3,\n    })\n\n    await studentsRepository.create(author)\n    await trailsRepository.create(trail)\n    await subjectsRepository.create(subject)\n    await projectsRepository.create(project)\n\n    sut = new SearchPostsByTagUseCase(projectsRepository)\n  })\n\n  it('should be able to search posts by trail tag', async () => {\n    const result = await sut.execute({\n      tag: 'Design',\n    })\n\n    expect(result).length(1)\n    expect(result[0].title).toBe(project.title)\n  })\n\n  it('should be able to search posts by subject tag', async () => {\n    const result = await sut.execute({\n      tag: 'Comunicação',\n    })\n\n    expect(result).length(1)\n    expect(result[0].title).toBe(project.title)\n  })\n\n  it('should be able to search posts by year tag', async () => {\n    const result = await sut.execute({\n      tag: '2024',\n    })\n\n    expect(result).length(1)\n    expect(result[0].title).toBe(project.title)\n  })\n\n  it('should be able to search posts by semester (digit) tag', async () => {\n    const result = await sut.execute({\n      tag: '3',\n    })\n\n    expect(result).length(1)\n    expect(result[0].title).toBe(project.title)\n  })\n\n  it('should be able to search posts by semester (ordinal) tag', async () => {\n    const result = await sut.execute({\n      tag: '3º',\n    })\n\n    expect(result).length(1)\n    expect(result[0].title).toBe(project.title)\n  })\n\n  it('should be able to search posts by semester (word) tag', async () => {\n    const result = await sut.execute({\n      tag: 'terceiro',\n    })\n\n    expect(result).length(1)\n    expect(result[0].title).toBe(project.title)\n  })\n\n  it('should not return any post when tag does not match', async () => {\n    const result = await sut.execute({\n      tag: 'Not found',\n    })\n\n    expect(result).length(0)\n  })\n})\n"],"names":["projectsRepository","studentsRepository","trailsRepository","subjectsRepository","author","trail","project","sut","describe","beforeEach","InMemoryUsersRepository","InMemoryTrailsRepository","InMemorySubjectsRepository","InMemoryProjectsRepository","undefined","id","UniqueEntityID","create","makeUser","profile","StudentProfile","semester","Semester","value","makeTrail","name","subject","makeSubject","makeProject","title","authorId","trails","Set","subjectId","publishedYear","SearchPostsByTagUseCase","it","result","execute","tag","expect","length","toBe"],"mappings":"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"}