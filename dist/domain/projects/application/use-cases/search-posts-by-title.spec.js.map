{"version":3,"sources":["../../../../../src/domain/projects/application/use-cases/search-posts-by-title.spec.ts"],"sourcesContent":["import type { UsersRepository } from '@/domain/authentication/application/repositories/users-repository'\nimport type { User } from '@/domain/authentication/enterprise/entities/user'\nimport { makeProject } from 'test/factories/make-project'\nimport { makeTrail } from 'test/factories/make-trail'\nimport { makeUser } from 'test/factories/make-user'\nimport { InMemoryProjectsRepository } from 'test/repositories/projects-repository'\nimport { InMemoryTrailsRepository } from 'test/repositories/trails-repository'\nimport { InMemoryUsersRepository } from 'test/repositories/users-repository'\nimport type { Project } from '../../../projects/enterprise/entities/project'\nimport type { Trail } from '../../enterprise/entities/trail'\nimport type { ProjectsRepository } from '../repositories/projects-repository'\nimport type { TrailsRepository } from '../repositories/trails-repository'\nimport { SearchPostsByTitleUseCase } from './search-posts-by-title'\n\nlet projectsRepository: ProjectsRepository\nlet studentsRepository: UsersRepository\nlet trailsRepository: TrailsRepository\n\nlet author: User\nlet trail: Trail\nlet project: Project\n\nlet sut: SearchPostsByTitleUseCase\n\ndescribe('search posts by title use case', () => {\n  beforeEach(async () => {\n    studentsRepository = new InMemoryUsersRepository()\n    trailsRepository = new InMemoryTrailsRepository()\n\n    projectsRepository = new InMemoryProjectsRepository(\n      studentsRepository,\n      undefined,\n      trailsRepository,\n      undefined,\n    )\n\n    author = await makeUser()\n\n    trail = makeTrail()\n\n    project = makeProject({\n      title: 'Awesome project',\n      authorId: author.id,\n      trails: new Set([trail.id]),\n    })\n\n    await studentsRepository.create(author)\n    await trailsRepository.create(trail)\n    await projectsRepository.create(project)\n\n    sut = new SearchPostsByTitleUseCase(projectsRepository)\n  })\n\n  it('should be able to search posts by title', async () => {\n    const result = await sut.execute({\n      title: 'Awesome',\n    })\n\n    expect(result).length(1)\n    expect(result[0].title).toBe(project.title)\n  })\n\n  it('should be able to search posts by title case insensitive', async () => {\n    const result = await sut.execute({\n      title: 'awesome',\n    })\n\n    expect(result).length(1)\n    expect(result[0].title).toBe(project.title)\n  })\n\n  it('should be able to search posts by title with partial match', async () => {\n    const result = await sut.execute({\n      title: 'some',\n    })\n\n    expect(result).length(1)\n    expect(result[0].title).toBe(project.title)\n  })\n\n  it('should not return any post when title does not match', async () => {\n    const result = await sut.execute({\n      title: 'Not found',\n    })\n\n    expect(result).length(0)\n  })\n})\n"],"names":["projectsRepository","studentsRepository","trailsRepository","author","trail","project","sut","describe","beforeEach","InMemoryUsersRepository","InMemoryTrailsRepository","InMemoryProjectsRepository","undefined","makeUser","makeTrail","makeProject","title","authorId","id","trails","Set","create","SearchPostsByTitleUseCase","it","result","execute","expect","length","toBe"],"mappings":";;;;6BAE4B;2BACF;0BACD;oCACkB;kCACF;iCACD;oCAKE;AAE1C,IAAIA;AACJ,IAAIC;AACJ,IAAIC;AAEJ,IAAIC;AACJ,IAAIC;AACJ,IAAIC;AAEJ,IAAIC;AAEJC,SAAS,kCAAkC;IACzCC,WAAW;QACTP,qBAAqB,IAAIQ,wCAAuB;QAChDP,mBAAmB,IAAIQ,0CAAwB;QAE/CV,qBAAqB,IAAIW,8CAA0B,CACjDV,oBACAW,WACAV,kBACAU;QAGFT,SAAS,MAAMU,IAAAA,kBAAQ;QAEvBT,QAAQU,IAAAA,oBAAS;QAEjBT,UAAUU,IAAAA,wBAAW,EAAC;YACpBC,OAAO;YACPC,UAAUd,OAAOe,EAAE;YACnBC,QAAQ,IAAIC,IAAI;gBAAChB,MAAMc,EAAE;aAAC;QAC5B;QAEA,MAAMjB,mBAAmBoB,MAAM,CAAClB;QAChC,MAAMD,iBAAiBmB,MAAM,CAACjB;QAC9B,MAAMJ,mBAAmBqB,MAAM,CAAChB;QAEhCC,MAAM,IAAIgB,6CAAyB,CAACtB;IACtC;IAEAuB,GAAG,2CAA2C;QAC5C,MAAMC,SAAS,MAAMlB,IAAImB,OAAO,CAAC;YAC/BT,OAAO;QACT;QAEAU,OAAOF,QAAQG,MAAM,CAAC;QACtBD,OAAOF,MAAM,CAAC,EAAE,CAACR,KAAK,EAAEY,IAAI,CAACvB,QAAQW,KAAK;IAC5C;IAEAO,GAAG,4DAA4D;QAC7D,MAAMC,SAAS,MAAMlB,IAAImB,OAAO,CAAC;YAC/BT,OAAO;QACT;QAEAU,OAAOF,QAAQG,MAAM,CAAC;QACtBD,OAAOF,MAAM,CAAC,EAAE,CAACR,KAAK,EAAEY,IAAI,CAACvB,QAAQW,KAAK;IAC5C;IAEAO,GAAG,8DAA8D;QAC/D,MAAMC,SAAS,MAAMlB,IAAImB,OAAO,CAAC;YAC/BT,OAAO;QACT;QAEAU,OAAOF,QAAQG,MAAM,CAAC;QACtBD,OAAOF,MAAM,CAAC,EAAE,CAACR,KAAK,EAAEY,IAAI,CAACvB,QAAQW,KAAK;IAC5C;IAEAO,GAAG,wDAAwD;QACzD,MAAMC,SAAS,MAAMlB,IAAImB,OAAO,CAAC;YAC/BT,OAAO;QACT;QAEAU,OAAOF,QAAQG,MAAM,CAAC;IACxB;AACF"}