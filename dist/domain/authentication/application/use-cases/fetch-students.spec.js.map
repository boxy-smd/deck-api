{"version":3,"sources":["../../../../../src/domain/authentication/application/use-cases/fetch-students.spec.ts"],"sourcesContent":["import { UniqueEntityID } from '@/shared/kernel/unique-entity-id'\nimport { makeUser } from 'test/factories/make-user'\nimport { InMemoryUsersRepository } from 'test/repositories/users-repository'\nimport { StudentProfile } from '../../enterprise/entities/student-profile'\nimport type { User } from '../../enterprise/entities/user'\nimport { Semester } from '../../enterprise/value-objects/semester'\nimport { Username } from '../../enterprise/value-objects/username'\nimport type { UsersRepository } from '../repositories/users-repository'\nimport { FetchStudentsUseCase } from './fetch-students'\n\nlet usersRepository: UsersRepository\n\nlet student: User\n\nlet sut: FetchStudentsUseCase\n\ndescribe('fetch students use case', () => {\n  beforeEach(async () => {\n    usersRepository = new InMemoryUsersRepository()\n\n    const id = UniqueEntityID.create()\n\n    student = await makeUser(\n      {\n        profile: StudentProfile.create(\n          { semester: Semester.create(1).value as Semester },\n          id,\n        ),\n      },\n      id,\n    )\n\n    sut = new FetchStudentsUseCase(usersRepository)\n  })\n\n  it('should be able to fetch students', async () => {\n    await usersRepository.create(student)\n\n    const result = await sut.execute({})\n\n    expect(result).toBeInstanceOf(Array<User>)\n    expect(result).toHaveLength(1)\n  })\n\n  it('should be able to fetch students with name', async () => {\n    const otherStudent = await makeUser({\n      name: 'Other Student',\n    })\n\n    await usersRepository.create(otherStudent)\n    await usersRepository.create(student)\n\n    const result = await sut.execute({ name: student.name })\n\n    expect(result).toBeInstanceOf(Array<User>)\n    expect(result).toHaveLength(1)\n    expect(result[0].name).toEqual(student.name)\n  })\n\n  it('should be able to fetch students with username', async () => {\n    const otherId = UniqueEntityID.create()\n\n    const otherStudent = await makeUser(\n      {\n        username: Username.create('other_student').value as Username,\n        profile: StudentProfile.create(\n          { semester: Semester.create(2).value as Semester },\n          otherId,\n        ),\n      },\n      otherId,\n    )\n\n    await usersRepository.create(otherStudent)\n    await usersRepository.create(student)\n\n    const result = await sut.execute({ name: student.username.value })\n\n    expect(result).toBeInstanceOf(Array<User>)\n    expect(result).toHaveLength(1)\n    expect(result[0].username).toEqual(student.username)\n  })\n\n  it('should be able to fetch students with empty array', async () => {\n    const result = await sut.execute({})\n\n    expect(result).toEqual([])\n  })\n})\n"],"names":["usersRepository","student","sut","describe","beforeEach","InMemoryUsersRepository","id","UniqueEntityID","create","makeUser","profile","StudentProfile","semester","Semester","value","FetchStudentsUseCase","it","result","execute","expect","toBeInstanceOf","Array","toHaveLength","otherStudent","name","toEqual","otherId","username","Username"],"mappings":";;;;gCAA+B;0BACN;iCACe;gCACT;0BAEN;0BACA;+BAEY;AAErC,IAAIA;AAEJ,IAAIC;AAEJ,IAAIC;AAEJC,SAAS,2BAA2B;IAClCC,WAAW;QACTJ,kBAAkB,IAAIK,wCAAuB;QAE7C,MAAMC,KAAKC,8BAAc,CAACC,MAAM;QAEhCP,UAAU,MAAMQ,IAAAA,kBAAQ,EACtB;YACEC,SAASC,8BAAc,CAACH,MAAM,CAC5B;gBAAEI,UAAUC,kBAAQ,CAACL,MAAM,CAAC,GAAGM,KAAK;YAAa,GACjDR;QAEJ,GACAA;QAGFJ,MAAM,IAAIa,mCAAoB,CAACf;IACjC;IAEAgB,GAAG,oCAAoC;QACrC,MAAMhB,gBAAgBQ,MAAM,CAACP;QAE7B,MAAMgB,SAAS,MAAMf,IAAIgB,OAAO,CAAC,CAAC;QAElCC,OAAOF,QAAQG,cAAc,CAACC;QAC9BF,OAAOF,QAAQK,YAAY,CAAC;IAC9B;IAEAN,GAAG,8CAA8C;QAC/C,MAAMO,eAAe,MAAMd,IAAAA,kBAAQ,EAAC;YAClCe,MAAM;QACR;QAEA,MAAMxB,gBAAgBQ,MAAM,CAACe;QAC7B,MAAMvB,gBAAgBQ,MAAM,CAACP;QAE7B,MAAMgB,SAAS,MAAMf,IAAIgB,OAAO,CAAC;YAAEM,MAAMvB,QAAQuB,IAAI;QAAC;QAEtDL,OAAOF,QAAQG,cAAc,CAACC;QAC9BF,OAAOF,QAAQK,YAAY,CAAC;QAC5BH,OAAOF,MAAM,CAAC,EAAE,CAACO,IAAI,EAAEC,OAAO,CAACxB,QAAQuB,IAAI;IAC7C;IAEAR,GAAG,kDAAkD;QACnD,MAAMU,UAAUnB,8BAAc,CAACC,MAAM;QAErC,MAAMe,eAAe,MAAMd,IAAAA,kBAAQ,EACjC;YACEkB,UAAUC,kBAAQ,CAACpB,MAAM,CAAC,iBAAiBM,KAAK;YAChDJ,SAASC,8BAAc,CAACH,MAAM,CAC5B;gBAAEI,UAAUC,kBAAQ,CAACL,MAAM,CAAC,GAAGM,KAAK;YAAa,GACjDY;QAEJ,GACAA;QAGF,MAAM1B,gBAAgBQ,MAAM,CAACe;QAC7B,MAAMvB,gBAAgBQ,MAAM,CAACP;QAE7B,MAAMgB,SAAS,MAAMf,IAAIgB,OAAO,CAAC;YAAEM,MAAMvB,QAAQ0B,QAAQ,CAACb,KAAK;QAAC;QAEhEK,OAAOF,QAAQG,cAAc,CAACC;QAC9BF,OAAOF,QAAQK,YAAY,CAAC;QAC5BH,OAAOF,MAAM,CAAC,EAAE,CAACU,QAAQ,EAAEF,OAAO,CAACxB,QAAQ0B,QAAQ;IACrD;IAEAX,GAAG,qDAAqD;QACtD,MAAMC,SAAS,MAAMf,IAAIgB,OAAO,CAAC,CAAC;QAElCC,OAAOF,QAAQQ,OAAO,CAAC,EAAE;IAC3B;AACF"}