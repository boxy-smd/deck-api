{"version":3,"sources":["../../../../../src/domain/authentication/application/use-cases/edit-profile.spec.ts"],"sourcesContent":["import type { TrailsRepository } from '@/domain/projects/application/repositories/trails-repository'\nimport type { Trail } from '@/domain/projects/enterprise/entities/trail'\nimport { UniqueEntityID } from '@/shared/kernel/unique-entity-id'\nimport { makeTrail } from 'test/factories/make-trail'\nimport { makeUser } from 'test/factories/make-user'\nimport { InMemoryTrailsRepository } from 'test/repositories/trails-repository'\nimport { InMemoryUsersRepository } from 'test/repositories/users-repository'\nimport { StudentProfile } from '../../enterprise/entities/student-profile'\nimport { User } from '../../enterprise/entities/user'\nimport { Semester } from '../../enterprise/value-objects/semester'\nimport type { UsersRepository } from '../repositories/users-repository'\nimport { EditProfileUseCase } from './edit-profile'\n\nlet usersRepository: UsersRepository\nlet trailsRepository: TrailsRepository\n\nlet student: User\nlet trail: Trail\n\nlet sut: EditProfileUseCase\n\ndescribe('edit profile use case', () => {\n  beforeEach(async () => {\n    usersRepository = new InMemoryUsersRepository()\n    trailsRepository = new InMemoryTrailsRepository()\n\n    const id = UniqueEntityID.create()\n\n    student = await makeUser(\n      {\n        profile: StudentProfile.create(\n          {\n            semester: Semester.create(2).value as Semester,\n          },\n          id,\n        ),\n      },\n      id,\n    )\n    trail = makeTrail()\n\n    student.addTrailToProfile(trail.id)\n\n    await trailsRepository.create(trail)\n    await usersRepository.create(student)\n\n    sut = new EditProfileUseCase(usersRepository, trailsRepository)\n  })\n\n  it('should be able to edit student profile', async () => {\n    const result = await sut.execute({\n      studentId: student.id.toString(),\n      semester: 4,\n    })\n\n    expect(result.isRight()).toBe(true)\n    expect(result.value).toBeInstanceOf(User)\n  })\n\n  it('should be able to edit student trails', async () => {\n    const newTrail = makeTrail({ name: 'Design' })\n\n    await trailsRepository.create(newTrail)\n\n    const result = await sut.execute({\n      studentId: student.id.toString(),\n      trailsIds: [newTrail.id.toString()],\n    })\n\n    expect(result.isRight()).toBe(true)\n    expect(result.value).toBeInstanceOf(User)\n  })\n\n  it('should not be able to edit student profile if student does not exist', async () => {\n    const result = await sut.execute({\n      studentId: 'invalid-id',\n      semester: 4,\n    })\n\n    expect(result.isLeft()).toBe(true)\n  })\n\n  it('should not be able to edit student trails if trail does not exist', async () => {\n    const result = await sut.execute({\n      studentId: student.id.toString(),\n      trailsIds: ['invalid-id'],\n    })\n\n    expect(result.isLeft()).toBe(true)\n  })\n})\n"],"names":["usersRepository","trailsRepository","student","trail","sut","describe","beforeEach","InMemoryUsersRepository","InMemoryTrailsRepository","id","UniqueEntityID","create","makeUser","profile","StudentProfile","semester","Semester","value","makeTrail","addTrailToProfile","EditProfileUseCase","it","result","execute","studentId","toString","expect","isRight","toBe","toBeInstanceOf","User","newTrail","name","trailsIds","isLeft"],"mappings":";;;;gCAE+B;2BACL;0BACD;kCACgB;iCACD;gCACT;sBACV;0BACI;6BAEU;AAEnC,IAAIA;AACJ,IAAIC;AAEJ,IAAIC;AACJ,IAAIC;AAEJ,IAAIC;AAEJC,SAAS,yBAAyB;IAChCC,WAAW;QACTN,kBAAkB,IAAIO,wCAAuB;QAC7CN,mBAAmB,IAAIO,0CAAwB;QAE/C,MAAMC,KAAKC,8BAAc,CAACC,MAAM;QAEhCT,UAAU,MAAMU,IAAAA,kBAAQ,EACtB;YACEC,SAASC,8BAAc,CAACH,MAAM,CAC5B;gBACEI,UAAUC,kBAAQ,CAACL,MAAM,CAAC,GAAGM,KAAK;YACpC,GACAR;QAEJ,GACAA;QAEFN,QAAQe,IAAAA,oBAAS;QAEjBhB,QAAQiB,iBAAiB,CAAChB,MAAMM,EAAE;QAElC,MAAMR,iBAAiBU,MAAM,CAACR;QAC9B,MAAMH,gBAAgBW,MAAM,CAACT;QAE7BE,MAAM,IAAIgB,+BAAkB,CAACpB,iBAAiBC;IAChD;IAEAoB,GAAG,0CAA0C;QAC3C,MAAMC,SAAS,MAAMlB,IAAImB,OAAO,CAAC;YAC/BC,WAAWtB,QAAQO,EAAE,CAACgB,QAAQ;YAC9BV,UAAU;QACZ;QAEAW,OAAOJ,OAAOK,OAAO,IAAIC,IAAI,CAAC;QAC9BF,OAAOJ,OAAOL,KAAK,EAAEY,cAAc,CAACC,UAAI;IAC1C;IAEAT,GAAG,yCAAyC;QAC1C,MAAMU,WAAWb,IAAAA,oBAAS,EAAC;YAAEc,MAAM;QAAS;QAE5C,MAAM/B,iBAAiBU,MAAM,CAACoB;QAE9B,MAAMT,SAAS,MAAMlB,IAAImB,OAAO,CAAC;YAC/BC,WAAWtB,QAAQO,EAAE,CAACgB,QAAQ;YAC9BQ,WAAW;gBAACF,SAAStB,EAAE,CAACgB,QAAQ;aAAG;QACrC;QAEAC,OAAOJ,OAAOK,OAAO,IAAIC,IAAI,CAAC;QAC9BF,OAAOJ,OAAOL,KAAK,EAAEY,cAAc,CAACC,UAAI;IAC1C;IAEAT,GAAG,wEAAwE;QACzE,MAAMC,SAAS,MAAMlB,IAAImB,OAAO,CAAC;YAC/BC,WAAW;YACXT,UAAU;QACZ;QAEAW,OAAOJ,OAAOY,MAAM,IAAIN,IAAI,CAAC;IAC/B;IAEAP,GAAG,qEAAqE;QACtE,MAAMC,SAAS,MAAMlB,IAAImB,OAAO,CAAC;YAC/BC,WAAWtB,QAAQO,EAAE,CAACgB,QAAQ;YAC9BQ,WAAW;gBAAC;aAAa;QAC3B;QAEAP,OAAOJ,OAAOY,MAAM,IAAIN,IAAI,CAAC;IAC/B;AACF"}