{"version":3,"sources":["../../../../../src/domain/authentication/enterprise/value-objects/email.ts"],"sourcesContent":["import { ValueObject } from '@/shared/kernel/value-object'\nimport { EmailBadFormattedError } from '../../application/errors/email-bad-formatted.error'\n\ninterface EmailProps {\n  value: string\n}\n\nexport class Email extends ValueObject<EmailProps> {\n  get value() {\n    return this.props.value\n  }\n\n  public static validate(email: string) {\n    const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/\n\n    const institutionEmailRegex = /@alu.ufc.br$/\n\n    return [!emailRegex.test(email), !institutionEmailRegex.test(email)]\n  }\n\n  public static create(email: string) {\n    const [isEmailBadFormatted, isNotInstitutionEmail] = Email.validate(email)\n\n    if (isEmailBadFormatted)\n      throw new EmailBadFormattedError('O e-mail é inválido.')\n\n    if (isNotInstitutionEmail)\n      throw new EmailBadFormattedError('O e-mail deve ser institucional.')\n\n    return new Email({ value: email })\n  }\n}\n"],"names":["Email","ValueObject","value","props","validate","email","emailRegex","institutionEmailRegex","test","create","isEmailBadFormatted","isNotInstitutionEmail","EmailBadFormattedError"],"mappings":";;;;+BAOaA;;;eAAAA;;;6BAPe;wCACW;AAMhC,IAAA,AAAMA,QAAN,MAAMA,cAAcC,wBAAW;IACpC,IAAIC,QAAQ;QACV,OAAO,IAAI,CAACC,KAAK,CAACD,KAAK;IACzB;IAEA,OAAcE,SAASC,KAAa,EAAE;QACpC,MAAMC,aAAa;QAEnB,MAAMC,wBAAwB;QAE9B,OAAO;YAAC,CAACD,WAAWE,IAAI,CAACH;YAAQ,CAACE,sBAAsBC,IAAI,CAACH;SAAO;IACtE;IAEA,OAAcI,OAAOJ,KAAa,EAAE;QAClC,MAAM,CAACK,qBAAqBC,sBAAsB,GAAGX,MAAMI,QAAQ,CAACC;QAEpE,IAAIK,qBACF,MAAM,IAAIE,8CAAsB,CAAC;QAEnC,IAAID,uBACF,MAAM,IAAIC,8CAAsB,CAAC;QAEnC,OAAO,IAAIZ,MAAM;YAAEE,OAAOG;QAAM;IAClC;AACF"}