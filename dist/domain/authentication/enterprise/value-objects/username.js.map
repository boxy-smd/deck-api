{"version":3,"sources":["../../../../../src/domain/authentication/enterprise/value-objects/username.ts"],"sourcesContent":["import { type Either, left, right } from '@/shared/either'\nimport { ValueObject } from '@/shared/kernel/value-object'\nimport { UsernameBadFormattedError } from '../../application/errors/username-bad-formatted.error'\nimport { UsernameInvalidSizeError } from '../../application/errors/username-invalid-size.error'\n\ninterface UsernameProps {\n  value: string\n}\n\nexport class Username extends ValueObject<UsernameProps> {\n  get value() {\n    return this.props.value\n  }\n\n  public static validate(username: string) {\n    const MIN_LENGTH = 3\n    const MAX_LENGTH = 20\n    const regex = /^[a-zA-Z0-9._-]{3,20}$/ // Alphanumeric, underscore, hyphen, and dot\n\n    const isTooShort = username.length < MIN_LENGTH\n    const isTooLong = username.length > MAX_LENGTH\n    const isBadFormatted = !regex.test(username)\n\n    return [isBadFormatted, isTooShort, isTooLong]\n  }\n\n  public static create(\n    username: string,\n  ): Either<UsernameBadFormattedError | UsernameInvalidSizeError, Username> {\n    const [isBadFormatted, isTooShort, isTooLong] = Username.validate(username)\n\n    if (isBadFormatted) {\n      return left(\n        new UsernameBadFormattedError(\n          'O nome de usuário deve conter apenas letras, números, sublinhados, hifens e pontos.',\n        ),\n      )\n    }\n\n    if (isTooShort) {\n      return left(\n        new UsernameInvalidSizeError(\n          'O nome de usuário deve ter pelo menos 3 caracteres.',\n        ),\n      )\n    }\n\n    if (isTooLong) {\n      return left(\n        new UsernameInvalidSizeError(\n          'O nome de usuário deve ter no máximo 20 caracteres.',\n        ),\n      )\n    }\n\n    return right(new Username({ value: username }))\n  }\n}\n"],"names":["Username","ValueObject","value","props","validate","username","MIN_LENGTH","MAX_LENGTH","regex","isTooShort","length","isTooLong","isBadFormatted","test","create","left","UsernameBadFormattedError","UsernameInvalidSizeError","right"],"mappings":";;;;+BASaA;;;eAAAA;;;wBAT4B;6BACb;2CACc;0CACD;AAMlC,IAAA,AAAMA,WAAN,MAAMA,iBAAiBC,wBAAW;IACvC,IAAIC,QAAQ;QACV,OAAO,IAAI,CAACC,KAAK,CAACD,KAAK;IACzB;IAEA,OAAcE,SAASC,QAAgB,EAAE;QACvC,MAAMC,aAAa;QACnB,MAAMC,aAAa;QACnB,MAAMC,QAAQ,yBAAyB,4CAA4C;;QAEnF,MAAMC,aAAaJ,SAASK,MAAM,GAAGJ;QACrC,MAAMK,YAAYN,SAASK,MAAM,GAAGH;QACpC,MAAMK,iBAAiB,CAACJ,MAAMK,IAAI,CAACR;QAEnC,OAAO;YAACO;YAAgBH;YAAYE;SAAU;IAChD;IAEA,OAAcG,OACZT,QAAgB,EACwD;QACxE,MAAM,CAACO,gBAAgBH,YAAYE,UAAU,GAAGX,SAASI,QAAQ,CAACC;QAElE,IAAIO,gBAAgB;YAClB,OAAOG,IAAAA,YAAI,EACT,IAAIC,oDAAyB,CAC3B;QAGN;QAEA,IAAIP,YAAY;YACd,OAAOM,IAAAA,YAAI,EACT,IAAIE,kDAAwB,CAC1B;QAGN;QAEA,IAAIN,WAAW;YACb,OAAOI,IAAAA,YAAI,EACT,IAAIE,kDAAwB,CAC1B;QAGN;QAEA,OAAOC,IAAAA,aAAK,EAAC,IAAIlB,SAAS;YAAEE,OAAOG;QAAS;IAC9C;AACF"}