{"version":3,"sources":["../../../../../src/domain/interaction/enterprise/entities/comment.ts"],"sourcesContent":["import type { StudentProfile } from '@/domain/authentication/enterprise/entities/student-profile'\nimport type { Project } from '@/domain/projects/enterprise/entities/project'\nimport { Entity } from '@/shared/kernel/entity'\nimport type { UniqueEntityID } from '@/shared/kernel/unique-entity-id'\nimport type { Optional } from '@/shared/types/optional'\nimport { Report } from './report'\n\nexport interface CommentProps {\n  content: string\n\n  authorId: UniqueEntityID<StudentProfile>\n  projectId: UniqueEntityID<Project>\n  reports: Set<Report>\n}\n\nexport class Comment extends Entity<CommentProps> {\n  // --- 1. Factory methods ---\n  static create(\n    props: Optional<CommentProps, 'reports'>,\n    id?: UniqueEntityID,\n  ): Comment {\n    return new Comment(\n      {\n        ...props,\n        reports: new Set(),\n      },\n      id,\n    )\n  }\n\n  static reconstitute(\n    props: CommentProps,\n    id: UniqueEntityID,\n    createdAt: Date,\n    updatedAt: Date,\n  ): Comment {\n    return new Comment(props, id, createdAt, updatedAt)\n  }\n\n  // --- 2. Methods ---\n  public updateContent(newContent: string) {\n    this.props.content = newContent\n  }\n\n  public report(content: string, authorId: UniqueEntityID<StudentProfile>) {\n    const report = Report.create({\n      content: content,\n      authorId: authorId,\n      commentId: this.id,\n    })\n\n    this.props.reports.add(report)\n    this.touch()\n  }\n\n  // --- 3. Getters ---\n  get content() {\n    return this.props.content\n  }\n\n  get authorId() {\n    return this.props.authorId\n  }\n\n  get projectId() {\n    return this.props.projectId\n  }\n\n  get reports() {\n    return [...this.props.reports]\n  }\n}\n"],"names":["Comment","Entity","create","props","id","reports","Set","reconstitute","createdAt","updatedAt","updateContent","newContent","content","report","authorId","Report","commentId","add","touch","projectId"],"mappings":";;;;+BAeaA;;;eAAAA;;;wBAbU;wBAGA;AAUhB,IAAA,AAAMA,UAAN,MAAMA,gBAAgBC,cAAM;IACjC,6BAA6B;IAC7B,OAAOC,OACLC,KAAwC,EACxCC,EAAmB,EACV;QACT,OAAO,IAAIJ,QACT;YACE,GAAGG,KAAK;YACRE,SAAS,IAAIC;QACf,GACAF;IAEJ;IAEA,OAAOG,aACLJ,KAAmB,EACnBC,EAAkB,EAClBI,SAAe,EACfC,SAAe,EACN;QACT,OAAO,IAAIT,QAAQG,OAAOC,IAAII,WAAWC;IAC3C;IAEA,qBAAqB;IACdC,cAAcC,UAAkB,EAAE;QACvC,IAAI,CAACR,KAAK,CAACS,OAAO,GAAGD;IACvB;IAEOE,OAAOD,OAAe,EAAEE,QAAwC,EAAE;QACvE,MAAMD,SAASE,cAAM,CAACb,MAAM,CAAC;YAC3BU,SAASA;YACTE,UAAUA;YACVE,WAAW,IAAI,CAACZ,EAAE;QACpB;QAEA,IAAI,CAACD,KAAK,CAACE,OAAO,CAACY,GAAG,CAACJ;QACvB,IAAI,CAACK,KAAK;IACZ;IAEA,qBAAqB;IACrB,IAAIN,UAAU;QACZ,OAAO,IAAI,CAACT,KAAK,CAACS,OAAO;IAC3B;IAEA,IAAIE,WAAW;QACb,OAAO,IAAI,CAACX,KAAK,CAACW,QAAQ;IAC5B;IAEA,IAAIK,YAAY;QACd,OAAO,IAAI,CAAChB,KAAK,CAACgB,SAAS;IAC7B;IAEA,IAAId,UAAU;QACZ,OAAO;eAAI,IAAI,CAACF,KAAK,CAACE,OAAO;SAAC;IAChC;AACF"}