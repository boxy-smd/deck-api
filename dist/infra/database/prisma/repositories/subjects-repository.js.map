{"version":3,"sources":["../../../../../src/infra/database/prisma/repositories/subjects-repository.ts"],"sourcesContent":["import type { SubjectsRepository } from '@/domain/projects/application/repositories/subjects-repository'\nimport type { Subject } from '@/domain/projects/enterprise/entities/subject'\nimport { prisma } from '../client'\nimport { PrismaSubjectMapper } from '../mappers/prisma-subject-mapper'\n\nexport class PrismaSubjectsRepository implements SubjectsRepository {\n  async findById(id: string): Promise<Subject | null> {\n    const subject = await prisma.subject.findUnique({\n      where: { id: id.toString() },\n    })\n\n    if (!subject) return null\n\n    return PrismaSubjectMapper.toEntity(subject)\n  }\n\n  async findByName(name: string): Promise<Subject | null> {\n    const subject = await prisma.subject.findFirst({ where: { name } })\n\n    if (!subject) return null\n\n    return PrismaSubjectMapper.toEntity(subject)\n  }\n\n  async findManyByName(name: string): Promise<Subject[]> {\n    const subjects = await prisma.subject.findMany({\n      where: { name: { contains: name } },\n      orderBy: {\n        name: 'asc',\n      },\n    })\n\n    return subjects.map(PrismaSubjectMapper.toEntity)\n  }\n\n  async findAll(): Promise<Subject[]> {\n    const subjects = await prisma.subject.findMany({\n      orderBy: {\n        name: 'asc',\n      },\n    })\n    return subjects.map(PrismaSubjectMapper.toEntity)\n  }\n\n  async existsById(id: string): Promise<boolean> {\n    const count = await prisma.subject.count({\n      where: { id: id.toString() },\n    })\n    return count > 0\n  }\n\n  async create(subject: Subject): Promise<void> {\n    const data = PrismaSubjectMapper.toPrisma(subject)\n    await prisma.subject.create({ data })\n  }\n\n  async save(subject: Subject): Promise<void> {\n    const data = PrismaSubjectMapper.toPrisma(subject)\n\n    await prisma.subject.update({\n      where: { id: subject.id.toString() },\n      data,\n    })\n  }\n\n  async delete(subject: Subject): Promise<void> {\n    await prisma.subject.delete({\n      where: { id: subject.id.toString() },\n    })\n  }\n\n  async deleteById(id: string): Promise<void> {\n    await prisma.subject.delete({\n      where: { id: id.toString() },\n    })\n  }\n}\n"],"names":["PrismaSubjectsRepository","findById","id","subject","prisma","findUnique","where","toString","PrismaSubjectMapper","toEntity","findByName","name","findFirst","findManyByName","subjects","findMany","contains","orderBy","map","findAll","existsById","count","create","data","toPrisma","save","update","delete","deleteById"],"mappings":";;;;+BAKaA;;;eAAAA;;;wBAHU;qCACa;AAE7B,IAAA,AAAMA,2BAAN,MAAMA;IACX,MAAMC,SAASC,EAAU,EAA2B;QAClD,MAAMC,UAAU,MAAMC,cAAM,CAACD,OAAO,CAACE,UAAU,CAAC;YAC9CC,OAAO;gBAAEJ,IAAIA,GAAGK,QAAQ;YAAG;QAC7B;QAEA,IAAI,CAACJ,SAAS,OAAO;QAErB,OAAOK,wCAAmB,CAACC,QAAQ,CAACN;IACtC;IAEA,MAAMO,WAAWC,IAAY,EAA2B;QACtD,MAAMR,UAAU,MAAMC,cAAM,CAACD,OAAO,CAACS,SAAS,CAAC;YAAEN,OAAO;gBAAEK;YAAK;QAAE;QAEjE,IAAI,CAACR,SAAS,OAAO;QAErB,OAAOK,wCAAmB,CAACC,QAAQ,CAACN;IACtC;IAEA,MAAMU,eAAeF,IAAY,EAAsB;QACrD,MAAMG,WAAW,MAAMV,cAAM,CAACD,OAAO,CAACY,QAAQ,CAAC;YAC7CT,OAAO;gBAAEK,MAAM;oBAAEK,UAAUL;gBAAK;YAAE;YAClCM,SAAS;gBACPN,MAAM;YACR;QACF;QAEA,OAAOG,SAASI,GAAG,CAACV,wCAAmB,CAACC,QAAQ;IAClD;IAEA,MAAMU,UAA8B;QAClC,MAAML,WAAW,MAAMV,cAAM,CAACD,OAAO,CAACY,QAAQ,CAAC;YAC7CE,SAAS;gBACPN,MAAM;YACR;QACF;QACA,OAAOG,SAASI,GAAG,CAACV,wCAAmB,CAACC,QAAQ;IAClD;IAEA,MAAMW,WAAWlB,EAAU,EAAoB;QAC7C,MAAMmB,QAAQ,MAAMjB,cAAM,CAACD,OAAO,CAACkB,KAAK,CAAC;YACvCf,OAAO;gBAAEJ,IAAIA,GAAGK,QAAQ;YAAG;QAC7B;QACA,OAAOc,QAAQ;IACjB;IAEA,MAAMC,OAAOnB,OAAgB,EAAiB;QAC5C,MAAMoB,OAAOf,wCAAmB,CAACgB,QAAQ,CAACrB;QAC1C,MAAMC,cAAM,CAACD,OAAO,CAACmB,MAAM,CAAC;YAAEC;QAAK;IACrC;IAEA,MAAME,KAAKtB,OAAgB,EAAiB;QAC1C,MAAMoB,OAAOf,wCAAmB,CAACgB,QAAQ,CAACrB;QAE1C,MAAMC,cAAM,CAACD,OAAO,CAACuB,MAAM,CAAC;YAC1BpB,OAAO;gBAAEJ,IAAIC,QAAQD,EAAE,CAACK,QAAQ;YAAG;YACnCgB;QACF;IACF;IAEA,MAAMI,OAAOxB,OAAgB,EAAiB;QAC5C,MAAMC,cAAM,CAACD,OAAO,CAACwB,MAAM,CAAC;YAC1BrB,OAAO;gBAAEJ,IAAIC,QAAQD,EAAE,CAACK,QAAQ;YAAG;QACrC;IACF;IAEA,MAAMqB,WAAW1B,EAAU,EAAiB;QAC1C,MAAME,cAAM,CAACD,OAAO,CAACwB,MAAM,CAAC;YAC1BrB,OAAO;gBAAEJ,IAAIA,GAAGK,QAAQ;YAAG;QAC7B;IACF;AACF"}