{"version":3,"sources":["../../../../../src/infra/database/prisma/repositories/reports-repository.ts"],"sourcesContent":["import type { ReportsRepository } from '@/domain/interaction/application/repositories/reports-repository'\nimport type { Report } from '@/domain/interaction/enterprise/entities/report'\nimport { prisma } from '../client'\nimport { PrismaReportMapper } from '../mappers/prisma-report-mapper'\n\nexport class PrismaReportsRepository implements ReportsRepository {\n  async findById(id: string): Promise<Report | null> {\n    const data = await prisma.report.findUnique({\n      where: {\n        id,\n      },\n    })\n\n    if (!data) return null\n\n    return PrismaReportMapper.toEntity(data)\n  }\n\n  async findAll(): Promise<Report[]> {\n    const data = await prisma.report.findMany()\n\n    return data.map(PrismaReportMapper.toEntity)\n  }\n\n  async create(report: Report): Promise<void> {\n    await prisma.report.create({\n      data: PrismaReportMapper.toPrisma(report),\n    })\n  }\n\n  async save(report: Report): Promise<void> {\n    await prisma.report.upsert({\n      where: {\n        id: report.id.toString(),\n      },\n      update: PrismaReportMapper.toPrisma(report),\n      create: PrismaReportMapper.toPrisma(report),\n    })\n  }\n\n  async delete(id: string): Promise<void> {\n    await prisma.report.delete({\n      where: {\n        id,\n      },\n    })\n  }\n\n  async deleteManyByCommentId(commentId: string): Promise<void> {\n    await prisma.report.deleteMany({\n      where: {\n        commentId,\n      },\n    })\n  }\n}\n"],"names":["PrismaReportsRepository","findById","id","data","prisma","report","findUnique","where","PrismaReportMapper","toEntity","findAll","findMany","map","create","toPrisma","save","upsert","toString","update","delete","deleteManyByCommentId","commentId","deleteMany"],"mappings":";;;;+BAKaA;;;eAAAA;;;wBAHU;oCACY;AAE5B,IAAA,AAAMA,0BAAN,MAAMA;IACX,MAAMC,SAASC,EAAU,EAA0B;QACjD,MAAMC,OAAO,MAAMC,cAAM,CAACC,MAAM,CAACC,UAAU,CAAC;YAC1CC,OAAO;gBACLL;YACF;QACF;QAEA,IAAI,CAACC,MAAM,OAAO;QAElB,OAAOK,sCAAkB,CAACC,QAAQ,CAACN;IACrC;IAEA,MAAMO,UAA6B;QACjC,MAAMP,OAAO,MAAMC,cAAM,CAACC,MAAM,CAACM,QAAQ;QAEzC,OAAOR,KAAKS,GAAG,CAACJ,sCAAkB,CAACC,QAAQ;IAC7C;IAEA,MAAMI,OAAOR,MAAc,EAAiB;QAC1C,MAAMD,cAAM,CAACC,MAAM,CAACQ,MAAM,CAAC;YACzBV,MAAMK,sCAAkB,CAACM,QAAQ,CAACT;QACpC;IACF;IAEA,MAAMU,KAAKV,MAAc,EAAiB;QACxC,MAAMD,cAAM,CAACC,MAAM,CAACW,MAAM,CAAC;YACzBT,OAAO;gBACLL,IAAIG,OAAOH,EAAE,CAACe,QAAQ;YACxB;YACAC,QAAQV,sCAAkB,CAACM,QAAQ,CAACT;YACpCQ,QAAQL,sCAAkB,CAACM,QAAQ,CAACT;QACtC;IACF;IAEA,MAAMc,OAAOjB,EAAU,EAAiB;QACtC,MAAME,cAAM,CAACC,MAAM,CAACc,MAAM,CAAC;YACzBZ,OAAO;gBACLL;YACF;QACF;IACF;IAEA,MAAMkB,sBAAsBC,SAAiB,EAAiB;QAC5D,MAAMjB,cAAM,CAACC,MAAM,CAACiB,UAAU,CAAC;YAC7Bf,OAAO;gBACLc;YACF;QACF;IACF;AACF"}