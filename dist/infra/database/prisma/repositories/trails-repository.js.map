{"version":3,"sources":["../../../../../src/infra/database/prisma/repositories/trails-repository.ts"],"sourcesContent":["import type { TrailsRepository } from '@/domain/projects/application/repositories/trails-repository'\nimport type { Trail } from '@/domain/projects/enterprise/entities/trail'\nimport { prisma } from '../client'\nimport { PrismaTrailMapper } from '../mappers/prisma-trail-mapper'\n\nexport class PrismaTrailsRepository implements TrailsRepository {\n  async findById(id: string): Promise<Trail | null> {\n    const trail = await prisma.trail.findUnique({ where: { id } })\n\n    if (!trail) return null\n\n    return PrismaTrailMapper.toEntity(trail)\n  }\n\n  async findByName(name: string): Promise<Trail | null> {\n    const trail = await prisma.trail.findFirst({ where: { name } })\n\n    if (!trail) return null\n\n    return PrismaTrailMapper.toEntity(trail)\n  }\n\n  async findManyByName(name: string): Promise<Trail[]> {\n    const trails = await prisma.trail.findMany({\n      where: { name: { contains: name } },\n    })\n\n    return trails.map(PrismaTrailMapper.toEntity)\n  }\n\n  async findAll(): Promise<Trail[]> {\n    const trails = await prisma.trail.findMany()\n    return trails.map(PrismaTrailMapper.toEntity)\n  }\n\n  async existsById(id: string): Promise<boolean> {\n    const count = await prisma.trail.count({\n      where: { id },\n    })\n\n    return count > 0\n  }\n\n  async create(trail: Trail): Promise<void> {\n    const data = PrismaTrailMapper.toPrisma(trail)\n    await prisma.trail.create({ data })\n  }\n\n  async save(trail: Trail): Promise<void> {\n    const data = PrismaTrailMapper.toPrisma(trail)\n\n    await prisma.trail.update({\n      where: { id: trail.id.toString() },\n      data,\n    })\n  }\n\n  async delete(trail: Trail): Promise<void> {\n    await prisma.trail.delete({\n      where: { id: trail.id.toString() },\n    })\n  }\n\n  async deleteById(id: string): Promise<void> {\n    await prisma.trail.delete({\n      where: { id },\n    })\n  }\n}\n"],"names":["PrismaTrailsRepository","findById","id","trail","prisma","findUnique","where","PrismaTrailMapper","toEntity","findByName","name","findFirst","findManyByName","trails","findMany","contains","map","findAll","existsById","count","create","data","toPrisma","save","update","toString","delete","deleteById"],"mappings":";;;;+BAKaA;;;eAAAA;;;wBAHU;mCACW;AAE3B,IAAA,AAAMA,yBAAN,MAAMA;IACX,MAAMC,SAASC,EAAU,EAAyB;QAChD,MAAMC,QAAQ,MAAMC,cAAM,CAACD,KAAK,CAACE,UAAU,CAAC;YAAEC,OAAO;gBAAEJ;YAAG;QAAE;QAE5D,IAAI,CAACC,OAAO,OAAO;QAEnB,OAAOI,oCAAiB,CAACC,QAAQ,CAACL;IACpC;IAEA,MAAMM,WAAWC,IAAY,EAAyB;QACpD,MAAMP,QAAQ,MAAMC,cAAM,CAACD,KAAK,CAACQ,SAAS,CAAC;YAAEL,OAAO;gBAAEI;YAAK;QAAE;QAE7D,IAAI,CAACP,OAAO,OAAO;QAEnB,OAAOI,oCAAiB,CAACC,QAAQ,CAACL;IACpC;IAEA,MAAMS,eAAeF,IAAY,EAAoB;QACnD,MAAMG,SAAS,MAAMT,cAAM,CAACD,KAAK,CAACW,QAAQ,CAAC;YACzCR,OAAO;gBAAEI,MAAM;oBAAEK,UAAUL;gBAAK;YAAE;QACpC;QAEA,OAAOG,OAAOG,GAAG,CAACT,oCAAiB,CAACC,QAAQ;IAC9C;IAEA,MAAMS,UAA4B;QAChC,MAAMJ,SAAS,MAAMT,cAAM,CAACD,KAAK,CAACW,QAAQ;QAC1C,OAAOD,OAAOG,GAAG,CAACT,oCAAiB,CAACC,QAAQ;IAC9C;IAEA,MAAMU,WAAWhB,EAAU,EAAoB;QAC7C,MAAMiB,QAAQ,MAAMf,cAAM,CAACD,KAAK,CAACgB,KAAK,CAAC;YACrCb,OAAO;gBAAEJ;YAAG;QACd;QAEA,OAAOiB,QAAQ;IACjB;IAEA,MAAMC,OAAOjB,KAAY,EAAiB;QACxC,MAAMkB,OAAOd,oCAAiB,CAACe,QAAQ,CAACnB;QACxC,MAAMC,cAAM,CAACD,KAAK,CAACiB,MAAM,CAAC;YAAEC;QAAK;IACnC;IAEA,MAAME,KAAKpB,KAAY,EAAiB;QACtC,MAAMkB,OAAOd,oCAAiB,CAACe,QAAQ,CAACnB;QAExC,MAAMC,cAAM,CAACD,KAAK,CAACqB,MAAM,CAAC;YACxBlB,OAAO;gBAAEJ,IAAIC,MAAMD,EAAE,CAACuB,QAAQ;YAAG;YACjCJ;QACF;IACF;IAEA,MAAMK,OAAOvB,KAAY,EAAiB;QACxC,MAAMC,cAAM,CAACD,KAAK,CAACuB,MAAM,CAAC;YACxBpB,OAAO;gBAAEJ,IAAIC,MAAMD,EAAE,CAACuB,QAAQ;YAAG;QACnC;IACF;IAEA,MAAME,WAAWzB,EAAU,EAAiB;QAC1C,MAAME,cAAM,CAACD,KAAK,CAACuB,MAAM,CAAC;YACxBpB,OAAO;gBAAEJ;YAAG;QACd;IACF;AACF"}