{"version":3,"sources":["../../../../../src/infra/database/prisma/repositories/professors-repository.ts"],"sourcesContent":["import type { ProfessorsRepository } from '@/domain/projects/application/repositories/professors-repository'\nimport type { Professor } from '@/domain/projects/enterprise/entities/professor'\nimport { prisma } from '../client'\nimport { PrismaProfessorMapper } from '../mappers/prisma-professor-mapper'\n\nexport class PrismaProfessorsRepository implements ProfessorsRepository {\n  async findById(id: string): Promise<Professor | null> {\n    const professor = await prisma.professor.findUnique({ where: { id } })\n\n    if (!professor) return null\n\n    return PrismaProfessorMapper.toEntity(professor)\n  }\n\n  async findByName(name: string): Promise<Professor | null> {\n    const professor = await prisma.professor.findFirst({ where: { name } })\n\n    if (!professor) return null\n\n    return PrismaProfessorMapper.toEntity(professor)\n  }\n\n  async findManyByName(name: string): Promise<Professor[]> {\n    const professors = await prisma.professor.findMany({\n      where: { name: { contains: name } },\n      orderBy: {\n        name: 'asc',\n      },\n    })\n\n    const orderedProfessors = professors.sort((a, b) => {\n      const professorA = a.name.replace('Prof. ', '').replace('Profa. ', '')\n      const professorB = b.name.replace('Prof. ', '').replace('Profa. ', '')\n\n      if (professorA < professorB) return -1\n      if (professorA > professorB) return 1\n\n      return 0\n    })\n\n    return orderedProfessors.map(PrismaProfessorMapper.toEntity)\n  }\n\n  async findAll(): Promise<Professor[]> {\n    const professors = await prisma.professor.findMany({\n      orderBy: {\n        name: 'asc',\n      },\n    })\n\n    const orderedProfessors = professors.sort((a, b) => {\n      const professorA = a.name.replace('Prof. ', '').replace('Profa. ', '')\n      const professorB = b.name.replace('Prof. ', '').replace('Profa. ', '')\n\n      if (professorA < professorB) return -1\n      if (professorA > professorB) return 1\n\n      return 0\n    })\n\n    return orderedProfessors.map(PrismaProfessorMapper.toEntity)\n  }\n\n  async existsById(id: string): Promise<boolean> {\n    const count = await prisma.professor.count({\n      where: {\n        id,\n      },\n    })\n\n    return count > 0\n  }\n\n  async create(professor: Professor): Promise<void> {\n    const data = PrismaProfessorMapper.toPrisma(professor)\n    await prisma.professor.create({ data })\n  }\n\n  async save(professor: Professor): Promise<void> {\n    const data = PrismaProfessorMapper.toPrisma(professor)\n\n    await prisma.professor.update({\n      where: { id: professor.id.toString() },\n      data,\n    })\n  }\n\n  async delete(professor: Professor): Promise<void> {\n    await prisma.professor.delete({\n      where: { id: professor.id.toString() },\n    })\n  }\n\n  async deleteById(id: string): Promise<void> {\n    await prisma.professor.delete({\n      where: { id },\n    })\n  }\n}\n"],"names":["PrismaProfessorsRepository","findById","id","professor","prisma","findUnique","where","PrismaProfessorMapper","toEntity","findByName","name","findFirst","findManyByName","professors","findMany","contains","orderBy","orderedProfessors","sort","a","b","professorA","replace","professorB","map","findAll","existsById","count","create","data","toPrisma","save","update","toString","delete","deleteById"],"mappings":";;;;+BAKaA;;;eAAAA;;;wBAHU;uCACe;AAE/B,IAAA,AAAMA,6BAAN,MAAMA;IACX,MAAMC,SAASC,EAAU,EAA6B;QACpD,MAAMC,YAAY,MAAMC,cAAM,CAACD,SAAS,CAACE,UAAU,CAAC;YAAEC,OAAO;gBAAEJ;YAAG;QAAE;QAEpE,IAAI,CAACC,WAAW,OAAO;QAEvB,OAAOI,4CAAqB,CAACC,QAAQ,CAACL;IACxC;IAEA,MAAMM,WAAWC,IAAY,EAA6B;QACxD,MAAMP,YAAY,MAAMC,cAAM,CAACD,SAAS,CAACQ,SAAS,CAAC;YAAEL,OAAO;gBAAEI;YAAK;QAAE;QAErE,IAAI,CAACP,WAAW,OAAO;QAEvB,OAAOI,4CAAqB,CAACC,QAAQ,CAACL;IACxC;IAEA,MAAMS,eAAeF,IAAY,EAAwB;QACvD,MAAMG,aAAa,MAAMT,cAAM,CAACD,SAAS,CAACW,QAAQ,CAAC;YACjDR,OAAO;gBAAEI,MAAM;oBAAEK,UAAUL;gBAAK;YAAE;YAClCM,SAAS;gBACPN,MAAM;YACR;QACF;QAEA,MAAMO,oBAAoBJ,WAAWK,IAAI,CAAC,CAACC,GAAGC;YAC5C,MAAMC,aAAaF,EAAET,IAAI,CAACY,OAAO,CAAC,UAAU,IAAIA,OAAO,CAAC,WAAW;YACnE,MAAMC,aAAaH,EAAEV,IAAI,CAACY,OAAO,CAAC,UAAU,IAAIA,OAAO,CAAC,WAAW;YAEnE,IAAID,aAAaE,YAAY,OAAO,CAAC;YACrC,IAAIF,aAAaE,YAAY,OAAO;YAEpC,OAAO;QACT;QAEA,OAAON,kBAAkBO,GAAG,CAACjB,4CAAqB,CAACC,QAAQ;IAC7D;IAEA,MAAMiB,UAAgC;QACpC,MAAMZ,aAAa,MAAMT,cAAM,CAACD,SAAS,CAACW,QAAQ,CAAC;YACjDE,SAAS;gBACPN,MAAM;YACR;QACF;QAEA,MAAMO,oBAAoBJ,WAAWK,IAAI,CAAC,CAACC,GAAGC;YAC5C,MAAMC,aAAaF,EAAET,IAAI,CAACY,OAAO,CAAC,UAAU,IAAIA,OAAO,CAAC,WAAW;YACnE,MAAMC,aAAaH,EAAEV,IAAI,CAACY,OAAO,CAAC,UAAU,IAAIA,OAAO,CAAC,WAAW;YAEnE,IAAID,aAAaE,YAAY,OAAO,CAAC;YACrC,IAAIF,aAAaE,YAAY,OAAO;YAEpC,OAAO;QACT;QAEA,OAAON,kBAAkBO,GAAG,CAACjB,4CAAqB,CAACC,QAAQ;IAC7D;IAEA,MAAMkB,WAAWxB,EAAU,EAAoB;QAC7C,MAAMyB,QAAQ,MAAMvB,cAAM,CAACD,SAAS,CAACwB,KAAK,CAAC;YACzCrB,OAAO;gBACLJ;YACF;QACF;QAEA,OAAOyB,QAAQ;IACjB;IAEA,MAAMC,OAAOzB,SAAoB,EAAiB;QAChD,MAAM0B,OAAOtB,4CAAqB,CAACuB,QAAQ,CAAC3B;QAC5C,MAAMC,cAAM,CAACD,SAAS,CAACyB,MAAM,CAAC;YAAEC;QAAK;IACvC;IAEA,MAAME,KAAK5B,SAAoB,EAAiB;QAC9C,MAAM0B,OAAOtB,4CAAqB,CAACuB,QAAQ,CAAC3B;QAE5C,MAAMC,cAAM,CAACD,SAAS,CAAC6B,MAAM,CAAC;YAC5B1B,OAAO;gBAAEJ,IAAIC,UAAUD,EAAE,CAAC+B,QAAQ;YAAG;YACrCJ;QACF;IACF;IAEA,MAAMK,OAAO/B,SAAoB,EAAiB;QAChD,MAAMC,cAAM,CAACD,SAAS,CAAC+B,MAAM,CAAC;YAC5B5B,OAAO;gBAAEJ,IAAIC,UAAUD,EAAE,CAAC+B,QAAQ;YAAG;QACvC;IACF;IAEA,MAAME,WAAWjC,EAAU,EAAiB;QAC1C,MAAME,cAAM,CAACD,SAAS,CAAC+B,MAAM,CAAC;YAC5B5B,OAAO;gBAAEJ;YAAG;QACd;IACF;AACF"}